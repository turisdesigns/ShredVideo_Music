!function(e){(function(){"use strict";function t(e){return"function"==typeof e||"object"==typeof e&&null!==e}function n(e){return"function"==typeof e}function r(e){return"object"==typeof e&&null!==e}function i(e){H=e}function a(e){X=e}function o(){var e=process.nextTick,t=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(t)&&"0"===t[1]&&"10"===t[2]&&(e=setImmediate),function(){e(p)}}function s(){return function(){D(p)}}function l(){var e=0,t=new G(p),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function u(){var e=new MessageChannel;return e.port1.onmessage=p,function(){e.port2.postMessage(0)}}function c(){return function(){setTimeout(p,1)}}function p(){for(var e=0;W>e;e+=2){var t=$[e],n=$[e+1];t(n),$[e]=void 0,$[e+1]=void 0}W=0}function d(){try{var e=require,t=e("vertx");return D=t.runOnLoop||t.runOnContext,s()}catch(n){return c()}}function h(){}function f(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function m(e){try{return e.then}catch(t){return ne.error=t,ne}}function y(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}function v(e,t,n){X(function(e){var r=!1,i=y(n,t,function(n){r||(r=!0,t!==n?k(e,n):T(e,n))},function(t){r||(r=!0,S(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,S(e,i))},e)}function b(e,t){t._state===ee?T(e,t._result):t._state===te?S(e,t._result):A(t,void 0,function(t){k(e,t)},function(t){S(e,t)})}function w(e,t){if(t.constructor===e.constructor)b(e,t);else{var r=m(t);r===ne?S(e,ne.error):void 0===r?T(e,t):n(r)?v(e,t,r):T(e,t)}}function k(e,n){e===n?S(e,f()):t(n)?w(e,n):T(e,n)}function x(e){e._onerror&&e._onerror(e._result),E(e)}function T(e,t){e._state===Z&&(e._result=t,e._state=ee,0!==e._subscribers.length&&X(E,e))}function S(e,t){e._state===Z&&(e._state=te,e._result=t,X(x,e))}function A(e,t,n,r){var i=e._subscribers,a=i.length;e._onerror=null,i[a]=t,i[a+ee]=n,i[a+te]=r,0===a&&e._state&&X(E,e)}function E(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i,a=e._result,o=0;o<t.length;o+=3)r=t[o],i=t[o+n],r?P(n,r,i,a):i(a);e._subscribers.length=0}}function L(){this.error=null}function C(e,t){try{return e(t)}catch(n){return re.error=n,re}}function P(e,t,r,i){var a,o,s,l,u=n(r);if(u){if(a=C(r,i),a===re?(l=!0,o=a.error,a=null):s=!0,t===a)return void S(t,g())}else a=i,s=!0;t._state!==Z||(u&&s?k(t,a):l?S(t,o):e===ee?T(t,a):e===te&&S(t,a))}function O(e,t){try{t(function(t){k(e,t)},function(t){S(e,t)})}catch(n){S(e,n)}}function _(e,t){var n=this;n._instanceConstructor=e,n.promise=new e(h),n._validateInput(t)?(n._input=t,n.length=t.length,n._remaining=t.length,n._init(),0===n.length?T(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&T(n.promise,n._result))):S(n.promise,n._validationError())}function N(e){return new ie(this,e).promise}function U(e){function t(e){k(i,e)}function n(e){S(i,e)}var r=this,i=new r(h);if(!z(e))return S(i,new TypeError("You must pass an array to race.")),i;for(var a=e.length,o=0;i._state===Z&&a>o;o++)A(r.resolve(e[o]),void 0,t,n);return i}function R(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(h);return k(n,e),n}function B(e){var t=this,n=new t(h);return S(n,e),n}function I(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function F(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function M(e){this._id=ue++,this._state=void 0,this._result=void 0,this._subscribers=[],h!==e&&(n(e)||I(),this instanceof M||F(),O(this,e))}function j(){var t;if("undefined"!=typeof e)t=e;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(n){throw new Error("polyfill failed because global object is unavailable in this environment")}var r=t.Promise;(!r||"[object Promise]"!==Object.prototype.toString.call(r.resolve())||r.cast)&&(t.Promise=ce)}var V;V=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var D,H,q,z=V,W=0,X=({}.toString,function(e,t){$[W]=e,$[W+1]=t,W+=2,2===W&&(H?H(p):q())}),Q="undefined"!=typeof window?window:void 0,J=Q||{},G=J.MutationObserver||J.WebKitMutationObserver,Y="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),K="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,$=new Array(1e3);q=Y?o():G?l():K?u():void 0===Q&&"function"==typeof require?d():c();var Z=void 0,ee=1,te=2,ne=new L,re=new L;_.prototype._validateInput=function(e){return z(e)},_.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},_.prototype._init=function(){this._result=new Array(this.length)};var ie=_;_.prototype._enumerate=function(){for(var e=this,t=e.length,n=e.promise,r=e._input,i=0;n._state===Z&&t>i;i++)e._eachEntry(r[i],i)},_.prototype._eachEntry=function(e,t){var n=this,i=n._instanceConstructor;r(e)?e.constructor===i&&e._state!==Z?(e._onerror=null,n._settledAt(e._state,t,e._result)):n._willSettleAt(i.resolve(e),t):(n._remaining--,n._result[t]=e)},_.prototype._settledAt=function(e,t,n){var r=this,i=r.promise;i._state===Z&&(r._remaining--,e===te?S(i,n):r._result[t]=n),0===r._remaining&&T(i,r._result)},_.prototype._willSettleAt=function(e,t){var n=this;A(e,void 0,function(e){n._settledAt(ee,t,e)},function(e){n._settledAt(te,t,e)})};var ae=N,oe=U,se=R,le=B,ue=0,ce=M;M.all=ae,M.race=oe,M.resolve=se,M.reject=le,M._setScheduler=i,M._setAsap=a,M._asap=X,M.prototype={constructor:M,then:function(e,t){var n=this,r=n._state;if(r===ee&&!e||r===te&&!t)return this;var i=new this.constructor(h),a=n._result;if(r){var o=arguments[r-1];X(function(){P(r,i,o,a)})}else A(n,i,e,t);return i},"catch":function(e){return this.then(null,e)}};var pe=j;window&&window.Promise&&"function"==typeof window.Promise||pe()}).call(this);var t=function(){"use strict";function e(e,s,l){var u=0,c=[0],p="",d=null,p=l||"UTF8";if("UTF8"!==p&&"UTF16"!==p)throw"encoding must be UTF8 or UTF16";if("HEX"===s){if(0!==e.length%2)throw"srcString of HEX type must be in byte increments";d=n(e),u=d.binLen,c=d.value}else if("ASCII"===s||"TEXT"===s)d=t(e,p),u=d.binLen,c=d.value;else{if("B64"!==s)throw"inputFormat must be HEX, TEXT, ASCII, or B64";d=r(e),u=d.binLen,c=d.value}this.getHash=function(e,t,n,r){var s,l=null,p=c.slice(),d=u;if(3===arguments.length?"number"!=typeof n&&(r=n,n=1):2===arguments.length&&(n=1),n!==parseInt(n,10)||1>n)throw"numRounds must a integer >= 1";switch(t){case"HEX":l=i;break;case"B64":l=a;break;default:throw"format must be HEX or B64"}if("SHA-224"===e)for(s=0;n>s;s++)p=y(p,d,e),d=224;else{if("SHA-256"!==e)throw"Chosen SHA variant is not supported";for(s=0;n>s;s++)p=y(p,d,e),d=256}return l(p,o(r))},this.getHMAC=function(e,s,l,d,h){var f,g,m,v,b=[],w=[];switch(f=null,d){case"HEX":d=i;break;case"B64":d=a;break;default:throw"outputFormat must be HEX or B64"}if("SHA-224"===l)g=64,v=224;else{if("SHA-256"!==l)throw"Chosen SHA variant is not supported";g=64,v=256}if("HEX"===s)f=n(e),m=f.binLen,f=f.value;else if("ASCII"===s||"TEXT"===s)f=t(e,p),m=f.binLen,f=f.value;else{if("B64"!==s)throw"inputFormat must be HEX, TEXT, ASCII, or B64";f=r(e),m=f.binLen,f=f.value}for(e=8*g,s=g/4-1,m/8>g?(f=y(f,m,l),f[s]&=4294967040):g>m/8&&(f[s]&=4294967040),g=0;s>=g;g+=1)b[g]=909522486^f[g],w[g]=1549556828^f[g];return l=y(w.concat(y(b.concat(c),e+u,l)),e+v,l),d(l,o(h))}}function t(e,t){var n,r,i=[],a=[],o=0;if("UTF8"===t)for(r=0;r<e.length;r+=1)for(n=e.charCodeAt(r),a=[],n>2048?(a[0]=224|(61440&n)>>>12,a[1]=128|(4032&n)>>>6,a[2]=128|63&n):n>128?(a[0]=192|(1984&n)>>>6,a[1]=128|63&n):a[0]=n,n=0;n<a.length;n+=1)i[o>>>2]|=a[n]<<24-o%4*8,o+=1;else if("UTF16"===t)for(r=0;r<e.length;r+=1)i[o>>>2]|=e.charCodeAt(r)<<16-o%4*8,o+=2;return{value:i,binLen:8*o}}function n(e){var t,n,r=[],i=e.length;if(0!==i%2)throw"String of HEX type must be in byte increments";for(t=0;i>t;t+=2){if(n=parseInt(e.substr(t,2),16),isNaN(n))throw"String of HEX type contains invalid characters";r[t>>>3]|=n<<24-t%8*4}return{value:r,binLen:4*i}}function r(e){var t,n,r,i,a,o=[],s=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw"Invalid character in base-64 string";if(t=e.indexOf("="),e=e.replace(/\=/g,""),-1!==t&&t<e.length)throw"Invalid '=' found in base-64 string";for(n=0;n<e.length;n+=4){for(a=e.substr(n,4),r=i=0;r<a.length;r+=1)t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[r]),i|=t<<18-6*r;for(r=0;r<a.length-1;r+=1)o[s>>2]|=(i>>>16-8*r&255)<<24-s%4*8,s+=1}return{value:o,binLen:8*s}}function i(e,t){var n,r,i="",a=4*e.length;for(n=0;a>n;n+=1)r=e[n>>>2]>>>8*(3-n%4),i+="0123456789abcdef".charAt(r>>>4&15)+"0123456789abcdef".charAt(15&r);return t.outputUpper?i.toUpperCase():i}function a(e,t){var n,r,i,a="",o=4*e.length;for(n=0;o>n;n+=3)for(i=(e[n>>>2]>>>8*(3-n%4)&255)<<16|(e[n+1>>>2]>>>8*(3-(n+1)%4)&255)<<8|e[n+2>>>2]>>>8*(3-(n+2)%4)&255,r=0;4>r;r+=1)a=8*n+6*r<=32*e.length?a+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>>6*(3-r)&63):a+t.b64Pad;return a}function o(e){var t={outputUpper:!1,b64Pad:"="};try{e.hasOwnProperty("outputUpper")&&(t.outputUpper=e.outputUpper),e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad)}catch(n){}if("boolean"!=typeof t.outputUpper)throw"Invalid outputUpper formatting option";if("string"!=typeof t.b64Pad)throw"Invalid b64Pad formatting option";return t}function s(e,t){return e>>>t|e<<32-t}function l(e,t,n){return e&t^~e&n}function u(e,t,n){return e&t^e&n^t&n}function c(e){return s(e,2)^s(e,13)^s(e,22)}function p(e){return s(e,6)^s(e,11)^s(e,25)}function d(e){return s(e,7)^s(e,18)^e>>>3}function h(e){return s(e,17)^s(e,19)^e>>>10}function f(e,t){var n=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(n>>>16)&65535)<<16|65535&n}function g(e,t,n,r){var i=(65535&e)+(65535&t)+(65535&n)+(65535&r);return((e>>>16)+(t>>>16)+(n>>>16)+(r>>>16)+(i>>>16)&65535)<<16|65535&i}function m(e,t,n,r,i){var a=(65535&e)+(65535&t)+(65535&n)+(65535&r)+(65535&i);return((e>>>16)+(t>>>16)+(n>>>16)+(r>>>16)+(i>>>16)+(a>>>16)&65535)<<16|65535&a}function y(e,t,n){var r,i,a,o,s,y,v,b,w,k,x,T,S,A,E,L,C,P,O,_,N,U,R,B,I,F,M=[],j=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];if(k=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],r=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],"SHA-224"!==n&&"SHA-256"!==n)throw"Unexpected error in SHA-2 implementation";for(x=64,A=16,E=1,I=Number,L=f,C=g,P=m,O=d,_=h,N=c,U=p,B=u,R=l,k="SHA-224"===n?k:r,e[t>>>5]|=128<<24-t%32,e[(t+65>>>9<<4)+15]=t,F=e.length,T=0;F>T;T+=A){for(t=k[0],r=k[1],i=k[2],a=k[3],o=k[4],s=k[5],y=k[6],v=k[7],S=0;x>S;S+=1)M[S]=16>S?new I(e[S*E+T],e[S*E+T+1]):C(_(M[S-2]),M[S-7],O(M[S-15]),M[S-16]),b=P(v,U(o),R(o,s,y),j[S],M[S]),w=L(N(t),B(t,r,i)),v=y,y=s,s=o,o=L(a,b),a=i,i=r,r=t,t=L(b,w);k[0]=L(t,k[0]),k[1]=L(r,k[1]),k[2]=L(i,k[2]),k[3]=L(a,k[3]),k[4]=L(o,k[4]),k[5]=L(s,k[5]),k[6]=L(y,k[6]),k[7]=L(v,k[7])}if("SHA-224"===n)e=[k[0],k[1],k[2],k[3],k[4],k[5],k[6]];else{if("SHA-256"!==n)throw"Unexpected error in SHA-2 implementation";e=k}return e}return e}(),n=function(){function t(){if(!W){try{var e=M.getElementsByTagName("body")[0].appendChild(v("span"));e.parentNode.removeChild(e)}catch(t){return}W=!0;for(var n=D.length,r=0;n>r;r++)D[r]()}}function r(e){W?e():D[D.length]=e}function i(e){if(typeof F.addEventListener!=O)F.addEventListener("load",e,!1);else if(typeof M.addEventListener!=O)M.addEventListener("load",e,!1);else if(typeof F.attachEvent!=O)b(F,"onload",e);else if("function"==typeof F.onload){var t=F.onload;F.onload=function(){t(),e()}}else F.onload=e}function a(){V?o():s()}function o(){var e=M.getElementsByTagName("body")[0],t=v(_);t.setAttribute("type",R);var n=e.appendChild(t);if(n){var r=0;!function(){if(typeof n.GetVariable!=O){var i=n.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),J.pv=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}else if(10>r)return r++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,s()}()}else s()}function s(){var e=H.length;if(e>0)for(var t=0;e>t;t++){var n=H[t].id,r=H[t].callbackFn,i={success:!1,id:n};if(J.pv[0]>0){var a=y(n);if(a)if(!w(H[t].swfVersion)||J.wk&&J.wk<312)if(H[t].expressInstall&&u()){var o={};o.data=H[t].expressInstall,o.width=a.getAttribute("width")||"0",o.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(o.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(o.align=a.getAttribute("align"));for(var s={},d=a.getElementsByTagName("param"),h=d.length,f=0;h>f;f++)"movie"!=d[f].getAttribute("name").toLowerCase()&&(s[d[f].getAttribute("name")]=d[f].getAttribute("value"));c(o,s,n,r)}else p(a),r&&r(i);else x(n,!0),r&&(i.success=!0,i.ref=l(n),r(i))}else if(x(n,!0),r){var g=l(n);g&&typeof g.SetVariable!=O&&(i.success=!0,i.ref=g),r(i)}}}function l(e){var t=null,n=y(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=O)t=n;else{var r=n.getElementsByTagName(_)[0];r&&(t=r)}return t}function u(){return!X&&w("6.0.65")&&(J.win||J.mac)&&!(J.wk&&J.wk<312)}function c(e,t,n,r){X=!0,E=r||null,L={success:!1,id:n};var i=y(n);if(i){"OBJECT"==i.nodeName?(S=d(i),A=null):(S=i,A=n),e.id=B,(typeof e.width==O||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==O||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),M.title=M.title.slice(0,47)+" - Flash Player Installation";var a=J.ie&&J.win?"ActiveX":"PlugIn",o="MMredirectURL="+F.location.toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+M.title;if(typeof t.flashvars!=O?t.flashvars+="&"+o:t.flashvars=o,J.ie&&J.win&&4!=i.readyState){var s=v("div");n+="SWFObjectNew",s.setAttribute("id",n),i.parentNode.insertBefore(s,i),i.style.display="none",function(){4==i.readyState?i.parentNode.removeChild(i):setTimeout(arguments.callee,10)}()}h(e,t,n)}}function p(e){if(J.ie&&J.win&&4!=e.readyState){var t=v("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(d(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(d(e),e)}function d(e){var t=v("div");if(J.win&&J.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(_)[0];if(n){var r=n.childNodes;if(r)for(var i=r.length,a=0;i>a;a++)1==r[a].nodeType&&"PARAM"==r[a].nodeName||8==r[a].nodeType||t.appendChild(r[a].cloneNode(!0))}}return t}function h(e,t,n){var r,i=y(n);if(J.wk&&J.wk<312)return r;if(i)if(typeof e.id==O&&(e.id=n),J.ie&&J.win){var a="";for(var o in e)e[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?t.movie=e[o]:"styleclass"==o.toLowerCase()?a+=' class="'+e[o]+'"':"classid"!=o.toLowerCase()&&(a+=" "+o+'="'+e[o]+'"'));var s="";for(var l in t)t[l]!=Object.prototype[l]&&(s+='<param name="'+l+'" value="'+t[l]+'" />');i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+s+"</object>",q[q.length]=e.id,r=y(e.id)}else{var u=v(_);u.setAttribute("type",R);for(var c in e)e[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?u.setAttribute("class",e[c]):"classid"!=c.toLowerCase()&&u.setAttribute(c,e[c]));for(var p in t)t[p]!=Object.prototype[p]&&"movie"!=p.toLowerCase()&&f(u,p,t[p]);i.parentNode.replaceChild(u,i),r=u}return r}function f(e,t,n){var r=v("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function g(e){var t=y(e);t&&"OBJECT"==t.nodeName&&(J.ie&&J.win?(t.style.display="none",function(){4==t.readyState?m(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function m(e){var t=y(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function y(e){var t=null;try{t=M.getElementById(e)}catch(n){}return t}function v(e){return M.createElement(e)}function b(e,t,n){e.attachEvent(t,n),z[z.length]=[e,t,n]}function w(e){var t=J.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function k(e,t,n,r){if(!J.ie||!J.mac){var i=M.getElementsByTagName("head")[0];if(i){var a=n&&"string"==typeof n?n:"screen";if(r&&(C=null,P=null),!C||P!=a){var o=v("style");o.setAttribute("type","text/css"),o.setAttribute("media",a),C=i.appendChild(o),J.ie&&J.win&&typeof M.styleSheets!=O&&M.styleSheets.length>0&&(C=M.styleSheets[M.styleSheets.length-1]),P=a}J.ie&&J.win?C&&typeof C.addRule==_&&C.addRule(e,t):C&&typeof M.createTextNode!=O&&C.appendChild(M.createTextNode(e+" {"+t+"}"))}}}function x(e,t){if(Q){var n=t?"visible":"hidden";W&&y(e)?y(e).style.visibility=n:k("#"+e,"visibility:"+n)}}function T(e){var t=/[\\\'<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=O?encodeURIComponent(e):e}var S,A,E,L,C,P,O="undefined",_="object",N="Shockwave Flash",U="ShockwaveFlash.ShockwaveFlash",R="application/x-shockwave-flash",B="SWFObjectExprInst",I="onreadystatechange",F=e,M=document,j=navigator,V=!1,D=[a],H=[],q=[],z=[],W=!1,X=!1,Q=!0,J=function(){var e=typeof M.getElementById!=O&&typeof M.getElementsByTagName!=O&&typeof M.createElement!=O,t=j.userAgent.toLowerCase(),n=j.platform.toLowerCase(),r=n?/win/.test(n):/win/.test(t),i=n?/mac/.test(n):/mac/.test(t),a=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,o=!1,s=[0,0,0],l=null;if(typeof j.plugins!=O&&typeof j.plugins[N]==_)l=j.plugins[N].description,!l||typeof j.mimeTypes!=O&&j.mimeTypes[R]&&!j.mimeTypes[R].enabledPlugin||(V=!0,o=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof F.ActiveXObject!=O)try{var u=new ActiveXObject(U);u&&(l=u.GetVariable("$version"),l&&(o=!0,l=l.split(" ")[1].split(","),s=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(c){}return{w3:e,pv:s,wk:a,ie:o,win:r,mac:i}}();return function(){J.w3&&((typeof M.readyState!=O&&"complete"==M.readyState||typeof M.readyState==O&&(M.getElementsByTagName("body")[0]||M.body))&&t(),W||(typeof M.addEventListener!=O&&M.addEventListener("DOMContentLoaded",t,!1),J.ie&&J.win&&(M.attachEvent(I,function(){"complete"==M.readyState&&(M.detachEvent(I,arguments.callee),t())}),F==top&&!function(){if(!W){try{M.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}t()}}()),J.wk&&!function(){return W?void 0:/loaded|complete/.test(M.readyState)?void t():void setTimeout(arguments.callee,0)}(),i(t)))}(),function(){J.ie&&J.win&&e.attachEvent("onunload",function(){for(var e=z.length,t=0;e>t;t++)z[t][0].detachEvent(z[t][1],z[t][2]);for(var r=q.length,i=0;r>i;i++)g(q[i]);for(var a in J)J[a]=null;J=null;for(var o in n)n[o]=null;n=null})}(),{registerObject:function(e,t,n,r){if(J.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,H[H.length]=i,x(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){return J.w3?l(e):void 0},embedSWF:function(e,t,n,i,a,o,s,l,p,d){var f={success:!1,id:t};J.w3&&!(J.wk&&J.wk<312)&&e&&t&&n&&i&&a?(x(t,!1),r(function(){n+="",i+="";var r={};if(p&&typeof p===_)for(var g in p)r[g]=p[g];r.data=e,r.width=n,r.height=i;var m={};if(l&&typeof l===_)for(var y in l)m[y]=l[y];if(s&&typeof s===_)for(var v in s)typeof m.flashvars!=O?m.flashvars+="&"+v+"="+s[v]:m.flashvars=v+"="+s[v];if(w(a)){var b=h(r,m,t);r.id==t&&x(t,!0),f.success=!0,f.ref=b}else{if(o&&u())return r.data=o,void c(r,m,t,d);x(t,!0)}d&&d(f)})):d&&d(f)},switchOffAutoHideShow:function(){Q=!1},ua:J,getFlashPlayerVersion:function(){return{major:J.pv[0],minor:J.pv[1],release:J.pv[2]}},hasFlashPlayerVersion:w,createSWF:function(e,t,n){return J.w3?h(e,t,n):void 0},showExpressInstall:function(e,t,n,r){J.w3&&u()&&c(e,t,n,r)},removeSWF:function(e){J.w3&&g(e)},createCSS:function(e,t,n,r){J.w3&&k(e,t,n,r)},addDomLoadEvent:r,addLoadEvent:i,getQueryParamValue:function(e){var t=M.location.search||M.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return T(t);for(var n=t.split("&"),r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return T(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(X){var e=y(B);e&&S&&(e.parentNode.replaceChild(S,e),A&&(x(A,!0),J.ie&&J.win&&(S.style.display="block")),E&&E(L)),X=!1}}}}(),r=(function(){return function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var u=n[o]={exports:{}};t[o][0].call(u.exports,function(e){var n=t[o][1][e];return i(n?n:e)},u,u.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function a(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!a(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,a,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,a=new Array(r-1),l=1;r>l;l++)a[l-1]=arguments[l];n.apply(this,a)}else if(o(n)){for(r=arguments.length,a=new Array(r-1),l=1;r>l;l++)a[l-1]=arguments[l];for(u=n.slice(),r=u.length,l=0;r>l;l++)u[l].apply(this,a)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var n;n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,a,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],2:[function(e,t,n){var r;r=function(){function e(){this.id=null,this.errorURLTemplates=[],this.impressionURLTemplates=[],this.creatives=[]}return e}(),t.exports=r},{}],3:[function(e,t,n){var r,i,a;i=e("./parser"),a=e("./util"),r=function(){function e(){}return e.cappingFreeLunch=0,e.cappingMinimumTimeInterval=0,e.options={withCredentials:!1,timeout:0},e.get=function(e,t,r){var a,o,s;return o=+new Date,a=n.extend=function(e,t){var n,r;for(n in t)r=t[n],e[n]=r;return e},r||("function"==typeof t&&(r=t),s={}),s=a(this.options,t),this.totalCallsTimeout<o?(this.totalCalls=1,this.totalCallsTimeout=o+36e5):this.totalCalls++,this.cappingFreeLunch>=this.totalCalls?void r(null):o-this.lastSuccessfullAd<this.cappingMinimumTimeInterval?void r(null):i.parse(e,s,function(e){return function(e){return r(e)}}(this))},function(){var t,n;n=a.storage,t=Object.defineProperty,["lastSuccessfullAd","totalCalls","totalCallsTimeout"].forEach(function(r){t(e,r,{get:function(){return n.getItem(r)},set:function(e){return n.setItem(r,e)},configurable:!1,enumerable:!0})}),null==e.totalCalls&&(e.totalCalls=0),null==e.totalCallsTimeout&&(e.totalCallsTimeout=0)}(),e}(),t.exports=r},{"./parser":8,"./util":14}],4:[function(e,t,n){var r;r=function(){function e(){this.id=null,this.width=0,this.height=0,this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.companionClickThroughURLTemplate=null,this.trackingEvents={}}return e}(),t.exports=r},{}],5:[function(e,t,n){var r,i,a,o,s={}.hasOwnProperty,l=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};r=function(){function e(){this.trackingEvents={}}return e}(),a=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.type="linear",this.duration=0,this.skipDelay=null,this.mediaFiles=[],this.videoClickThroughURLTemplate=null,this.videoClickTrackingURLTemplates=[],this.videoCustomClickURLTemplates=[],this.adParameters=null}return l(t,e),t}(r),o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t}(r),i=function(e){function t(){this.type="companion",this.variations=[],this.videoClickTrackingURLTemplates=[]}return l(t,e),t}(r),t.exports={VASTCreativeLinear:a,VASTCreativeNonLinear:o,VASTCreativeCompanion:i}},{}],6:[function(e,t,n){t.exports={client:e("./client"),tracker:e("./tracker"),parser:e("./parser"),util:e("./util")}},{"./client":3,"./parser":8,"./tracker":10,"./util":14}],7:[function(e,t,n){var r;r=function(){function e(){this.id=null,this.fileURL=null,this.deliveryType="progressive",this.mimeType=null,this.codec=null,this.bitrate=0,this.minBitrate=0,this.maxBitrate=0,this.width=0,this.height=0,this.apiFramework=null,this.scalable=null,this.maintainAspectRatio=null}return e}(),t.exports=r},{}],8:[function(e,t,n){var r,i,a,o,s,l,u,c,p,d,h=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=e("./urlhandler"),p=e("./response"),a=e("./ad"),d=e("./util"),l=e("./creative").VASTCreativeLinear,s=e("./creative").VASTCreativeCompanion,u=e("./mediafile"),o=e("./companionad"),r=e("events").EventEmitter,c=function(){function e(){}var t;return t=[],e.addURLTemplateFilter=function(e){"function"==typeof e&&t.push(e)},e.removeURLTemplateFilter=function(){return t.pop()},e.countURLTemplateFilters=function(){return t.length},e.clearUrlTemplateFilters=function(){return t=[]},e.parse=function(e,t,n){return n||("function"==typeof t&&(n=t),t={}),this._parse(e,null,t,function(e,t){return n(t)})},e.vent=new r,e.track=function(e,t){return this.vent.emit("VAST-error",t),d.track(e,t)},e.on=function(e,t){return this.vent.on(e,t)},e.once=function(e,t){return this.vent.once(e,t)},e._parse=function(e,n,r,a){var o,s,l;for(a||("function"==typeof r&&(a=r),r={}),s=0,l=t.length;l>s;s++)o=t[s],e=o(e);return null==n&&(n=[]),n.push(e),i.get(e,r,function(t){return function(i,o){var s,l,u,c,d,f,g,m,y,v,b;if(null!=i)return a(i);if(d=new p,null==(null!=o?o.documentElement:void 0)||"VAST"!==o.documentElement.nodeName)return a();for(v=o.documentElement.childNodes,f=0,m=v.length;m>f;f++)c=v[f],"Error"===c.nodeName&&d.errorURLTemplates.push(t.parseNodeText(c));for(b=o.documentElement.childNodes,g=0,y=b.length;y>g;g++)c=b[g],"Ad"===c.nodeName&&(s=t.parseAdElement(c),null!=s?d.ads.push(s):t.track(d.errorURLTemplates,{ERRORCODE:101}));for(l=function(e){var n,r,i;if(null==e&&(e=!1),d){for(i=d.ads,n=0,r=i.length;r>n;n++)if(s=i[n],null!=s.nextWrapperURL)return;return 0===d.ads.length&&(e||t.track(d.errorURLTemplates,{ERRORCODE:303}),d=null),a(null,d)}},u=d.ads.length;u--;)s=d.ads[u],null!=s.nextWrapperURL&&!function(i){var a,o,s;return n.length>=10||(s=i.nextWrapperURL,h.call(n,s)>=0)?(t.track(i.errorURLTemplates,{ERRORCODE:302}),d.ads.splice(d.ads.indexOf(i),1),void l()):(0===i.nextWrapperURL.indexOf("//")?(o=location.protocol,i.nextWrapperURL=""+o+i.nextWrapperURL):-1===i.nextWrapperURL.indexOf("://")&&(a=e.slice(0,e.lastIndexOf("/")),i.nextWrapperURL=""+a+"/"+i.nextWrapperURL),t._parse(i.nextWrapperURL,n,r,function(e,n){var r,a,o,s,u,c,p,h,f,g,m,y,v,b,w,k,x,T;if(a=!1,null!=e)t.track(i.errorURLTemplates,{ERRORCODE:301}),d.ads.splice(d.ads.indexOf(i),1),a=!0;else if(null==n)t.track(i.errorURLTemplates,{ERRORCODE:303}),d.ads.splice(d.ads.indexOf(i),1),a=!0;else for(d.errorURLTemplates=d.errorURLTemplates.concat(n.errorURLTemplates),s=d.ads.indexOf(i),d.ads.splice(s,1),w=n.ads,p=0,h=w.length;h>p;p++){if(u=w[p],u.errorURLTemplates=i.errorURLTemplates.concat(u.errorURLTemplates),u.impressionURLTemplates=i.impressionURLTemplates.concat(u.impressionURLTemplates),null!=i.trackingEvents)for(k=u.creatives,y=0,f=k.length;f>y;y++)if(r=k[y],"linear"===r.type)for(x=Object.keys(i.trackingEvents),v=0,g=x.length;g>v;v++)o=x[v],(c=r.trackingEvents)[o]||(c[o]=[]),r.trackingEvents[o]=r.trackingEvents[o].concat(i.trackingEvents[o]);if(null!=i.videoClickTrackingURLTemplates)for(T=u.creatives,b=0,m=T.length;m>b;b++)r=T[b],"linear"===r.type&&(r.videoClickTrackingURLTemplates=r.videoClickTrackingURLTemplates.concat(i.videoClickTrackingURLTemplates));d.ads.splice(s,0,u)}return delete i.nextWrapperURL,l(a)}))}(s);return l()}}(this))},e.childByName=function(e,t){var n,r,i,a;for(a=e.childNodes,r=0,i=a.length;i>r;r++)if(n=a[r],n.nodeName===t)return n},e.childsByName=function(e,t){var n,r,i,a,o;for(r=[],o=e.childNodes,i=0,a=o.length;a>i;i++)n=o[i],n.nodeName===t&&r.push(n);return r},e.parseAdElement=function(e){var t,n,r,i;for(i=e.childNodes,n=0,r=i.length;r>n;n++){if(t=i[n],t.id=e.getAttribute("id"),"Wrapper"===t.nodeName)return this.parseWrapperElement(t);if("InLine"===t.nodeName)return this.parseInLineElement(t)}},e.parseWrapperElement=function(e){var t,n,r,i,a,o,s;for(t=this.parseInLineElement(e),i=this.childByName(e,"VASTAdTagURI"),null!=i?t.nextWrapperURL=this.parseNodeText(i):(i=this.childByName(e,"VASTAdTagURL"),null!=i&&(t.nextWrapperURL=this.parseNodeText(this.childByName(i,"URL")))),
r=null,s=t.creatives,a=0,o=s.length;o>a;a++)if(n=s[a],"linear"===n.type){r=n;break}return null!=r&&(null!=r.trackingEvents&&(t.trackingEvents=r.trackingEvents),null!=r.videoClickTrackingURLTemplates&&(t.videoClickTrackingURLTemplates=r.videoClickTrackingURLTemplates)),null!=t.nextWrapperURL?t:void 0},e.parseInLineElement=function(e){var t,n,r,i,o,s,l,u,c,p,d,h,f,g;for(t=new a,t.id=e.id,h=e.childNodes,s=0,c=h.length;c>s;s++)switch(o=h[s],o.nodeName){case"Error":this.isUrl(o)&&t.errorURLTemplates.push(this.parseNodeText(o));break;case"Impression":this.isUrl(o)&&t.impressionURLTemplates.push(this.parseNodeText(o));break;case"Creatives":for(f=this.childsByName(o,"Creative"),l=0,p=f.length;p>l;l++)for(r=f[l],g=r.childNodes,u=0,d=g.length;d>u;u++)switch(i=g[u],i.nodeName){case"Linear":n=this.parseCreativeLinearElement(i),n&&t.creatives.push(n);break;case"CompanionAds":n=this.parseCompanionAd(i),n&&t.creatives.push(n)}}return t},e.parseCreativeLinearElement=function(e){var t,n,r,i,a,o,s,c,p,d,h,f,g,m,y,v,b,w,k,x,T,S,A,E,L,C,P,O,_,N,U,R,B,I,F,M;if(r=new l,r.duration=this.parseDuration(this.parseNodeText(this.childByName(e,"Duration"))),-1===r.duration&&"Wrapper"!==e.parentNode.parentNode.parentNode.nodeName)return null;if(g=e.getAttribute("skipoffset"),null==g?r.skipDelay=null:"%"===g.charAt(g.length-1)?(h=parseInt(g,10),r.skipDelay=r.duration*(h/100)):r.skipDelay=this.parseDuration(g),b=this.childByName(e,"VideoClicks"),null!=b){for(r.videoClickThroughURLTemplate=this.parseNodeText(this.childByName(b,"ClickThrough")),U=this.childsByName(b,"ClickTracking"),k=0,A=U.length;A>k;k++)n=U[k],r.videoClickTrackingURLTemplates.push(this.parseNodeText(n));for(R=this.childsByName(b,"CustomClick"),x=0,E=R.length;E>x;x++)i=R[x],r.videoCustomClickURLTemplates.push(this.parseNodeText(i))}for(t=this.childByName(e,"AdParameters"),null!=t&&(r.adParameters=this.parseNodeText(t)),B=this.childsByName(e,"TrackingEvents"),T=0,L=B.length;L>T;T++)for(y=B[T],I=this.childsByName(y,"Tracking"),S=0,C=I.length;C>S;S++)if(m=I[S],a=m.getAttribute("event"),v=this.parseNodeText(m),null!=a&&null!=v){if("progress"===a){if(d=m.getAttribute("offset"),!d)continue;a="%"===d.charAt(d.length-1)?"progress-"+d:"progress-"+Math.round(this.parseDuration(d))}null==(w=r.trackingEvents)[a]&&(w[a]=[]),r.trackingEvents[a].push(v)}for(F=this.childsByName(e,"MediaFiles"),_=0,P=F.length;P>_;_++)for(p=F[_],M=this.childsByName(p,"MediaFile"),N=0,O=M.length;O>N;N++)c=M[N],s=new u,s.id=c.getAttribute("id"),s.fileURL=this.parseNodeText(c),s.deliveryType=c.getAttribute("delivery"),s.codec=c.getAttribute("codec"),s.mimeType=c.getAttribute("type"),s.apiFramework=c.getAttribute("apiFramework"),s.bitrate=parseInt(c.getAttribute("bitrate")||0),s.minBitrate=parseInt(c.getAttribute("minBitrate")||0),s.maxBitrate=parseInt(c.getAttribute("maxBitrate")||0),s.width=parseInt(c.getAttribute("width")||0),s.height=parseInt(c.getAttribute("height")||0),f=c.getAttribute("scalable"),f&&"string"==typeof f&&(f=f.toLowerCase(),"true"===f?s.scalable=!0:"false"===f&&(s.scalable=!1)),o=c.getAttribute("maintainAspectRatio"),o&&"string"==typeof o&&(o=o.toLowerCase(),"true"===o?s.maintainAspectRatio=!0:"false"===o&&(s.maintainAspectRatio=!1)),r.mediaFiles.push(s);return r},e.parseCompanionAd=function(e){var t,n,r,i,a,l,u,c,p,d,h,f,g,m,y,v,b,w,k,x,T,S,A,E,L,C,P,O,_;for(r=new s,E=this.childsByName(e,"Companion"),f=0,v=E.length;v>f;f++){for(n=E[f],t=new o,t.id=n.getAttribute("id")||null,t.width=n.getAttribute("width"),t.height=n.getAttribute("height"),L=this.childsByName(n,"HTMLResource"),g=0,b=L.length;b>g;g++)a=L[g],t.type=a.getAttribute("creativeType")||"text/html",t.htmlResource=this.parseNodeText(a);for(C=this.childsByName(n,"IFrameResource"),m=0,w=C.length;w>m;m++)l=C[m],t.type=l.getAttribute("creativeType")||0,t.iframeResource=this.parseNodeText(l);for(P=this.childsByName(n,"StaticResource"),y=0,k=P.length;k>y;y++)u=P[y],t.type=u.getAttribute("creativeType")||0,t.staticResource=this.parseNodeText(u);for(O=this.childsByName(n,"TrackingEvents"),S=0,x=O.length;x>S;S++)for(p=O[S],_=this.childsByName(p,"Tracking"),A=0,T=_.length;T>A;A++)c=_[A],i=c.getAttribute("event"),d=this.parseNodeText(c),null!=i&&null!=d&&(null==(h=t.trackingEvents)[i]&&(h[i]=[]),t.trackingEvents[i].push(d));t.companionClickThroughURLTemplate=this.parseNodeText(this.childByName(n,"CompanionClickThrough")),r.variations.push(t)}return r},e.parseDuration=function(e){var t,n,r,i,a;return null==e?-1:(t=e.split(":"),3!==t.length?-1:(a=t[2].split("."),i=parseInt(a[0]),2===a.length&&(i+=parseFloat("0."+a[1])),r=parseInt(60*t[1]),n=parseInt(60*t[0]*60),isNaN(n||isNaN(r||isNaN(i||r>3600||i>60)))?-1:n+r+i))},e.parseNodeText=function(e){return e&&(e.textContent||e.text||"").trim()},e.isUrl=function(e){return/^https?:\/\/[^\s\/$\.\?#].*$/i.test(this.parseNodeText(e))},e}(),t.exports=c},{"./ad":2,"./companionad":4,"./creative":5,"./mediafile":7,"./response":9,"./urlhandler":11,"./util":14,events:1}],9:[function(e,t,n){var r;r=function(){function e(){this.ads=[],this.errorURLTemplates=[]}return e}(),t.exports=r},{}],10:[function(e,t,n){var r,i,a,o,s,l={}.hasOwnProperty,u=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};i=e("./client"),s=e("./util"),a=e("./creative").VASTCreativeLinear,r=e("events").EventEmitter,o=function(e){function t(e,t){var n,r,o;this.ad=e,this.creative=t,this.muted=!1,this.impressed=!1,this.skipable=!1,this.skipDelayDefault=-1,this.trackingEvents={},this.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],o=this.creative.trackingEvents;for(n in o)r=o[n],this.trackingEvents[n]=r.slice(0);this.creative instanceof a?(this.setDuration(this.creative.duration),this.skipDelay=this.creative.skipDelay,this.linear=!0,this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates):(this.skipDelay=-1,this.linear=!1),this.on("start",function(){i.lastSuccessfullAd=+new Date})}return u(t,e),t.prototype.setDuration=function(e){return this.assetDuration=e,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100}},t.prototype.setProgress=function(e){var t,n,r,i,a,o,s,l,u;if(a=null===this.skipDelay?this.skipDelayDefault:this.skipDelay,-1===a||this.skipable||(a>e?this.emit("skip-countdown",a-e):(this.skipable=!0,this.emit("skip-countdown",0))),this.linear&&this.assetDuration>0){if(n=[],e>0){n.push("start"),r=Math.round(e/this.assetDuration*100),n.push("progress-"+r+"%"),n.push("progress-"+Math.round(e)),u=this.quartiles;for(i in u)o=u[i],e>=o&&o+1>=e&&n.push(i)}for(s=0,l=n.length;l>s;s++)t=n[s],this.track(t,!0);e<this.progress&&this.track("rewind")}return this.progress=e},t.prototype.setMuted=function(e){return this.muted!==e&&this.track(e?"mute":"unmute"),this.muted=e},t.prototype.setPaused=function(e){return this.paused!==e&&this.track(e?"pause":"resume"),this.paused=e},t.prototype.setFullscreen=function(e){return this.fullscreen!==e&&this.track(e?"fullscreen":"exitFullscreen"),this.fullscreen=e},t.prototype.setSkipDelay=function(e){return"number"==typeof e?this.skipDelay=e:void 0},t.prototype.load=function(){return this.impressed?void 0:(this.impressed=!0,this.ad.impressionURLTemplates&&this.trackURLs(this.ad.impressionURLTemplates),this.track("creativeView"))},t.prototype.errorWithCode=function(e){return this.trackURLs(this.ad.errorURLTemplates,{ERRORCODE:e})},t.prototype.complete=function(){return this.track("complete")},t.prototype.stop=function(){return this.track(this.linear?"closeLinear":"close")},t.prototype.skip=function(){return this.track("skip"),this.trackingEvents=[]},t.prototype.click=function(){var e,t,n;return(null!=(n=this.clickTrackingURLTemplates)?n.length:void 0)&&this.trackURLs(this.clickTrackingURLTemplates),null!=this.clickThroughURLTemplate?(this.linear&&(t={CONTENTPLAYHEAD:this.progressFormated()}),e=s.resolveURLTemplates([this.clickThroughURLTemplate],t)[0],this.emit("clickthrough",e)):void 0},t.prototype.track=function(e,t){var n,r;null==t&&(t=!1),"closeLinear"===e&&null==this.trackingEvents[e]&&null!=this.trackingEvents.close&&(e="close"),r=this.trackingEvents[e],n=this.emitAlwaysEvents.indexOf(e),null!=r?(this.emit(e,""),this.trackURLs(r)):-1!==n&&this.emit(e,""),t===!0&&(delete this.trackingEvents[e],n>-1&&this.emitAlwaysEvents.splice(n,1))},t.prototype.trackURLs=function(e,t){return null==t&&(t={}),this.linear&&(t.CONTENTPLAYHEAD=this.progressFormated()),s.track(e,t)},t.prototype.progressFormated=function(){var e,t,n,r,i;return i=parseInt(this.progress),e=i/3600,e.length<2&&(e="0"+e),t=i/60%60,t.length<2&&(t="0"+t),r=i%60,r.length<2&&(r="0"+t),n=parseInt(100*(this.progress-i)),""+e+":"+t+":"+r+"."+n},t}(r),t.exports=o},{"./client":3,"./creative":5,"./util":14,events:1}],11:[function(e,t,n){var r,i,a;a=e("./urlhandlers/xmlhttprequest"),i=e("./urlhandlers/flash"),r=function(){function t(){}return t.get=function(t,n,r){return r||("function"==typeof n&&(r=n),n={}),n.urlhandler&&n.urlhandler.supported()?n.urlhandler.get(t,n,r):"undefined"==typeof window||null===window?e("./urlhandlers/node").get(t,n,r):a.supported()?a.get(t,n,r):i.supported()?i.get(t,n,r):r()},t}(),t.exports=r},{"./urlhandlers/flash":12,"./urlhandlers/xmlhttprequest":13}],12:[function(e,t,n){var r;r=function(){function e(){}return e.xdr=function(){var e;return window.XDomainRequest&&(e=new XDomainRequest),e},e.supported=function(){return!!this.xdr()},e.get=function(e,t,n){var r,i;return(i="function"==typeof window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLDOM"):void 0)?(i.async=!1,r=this.xdr(),r.open("GET",e),r.timeout=t.timeout||0,r.withCredentials=t.withCredentials||!1,r.send(),r.onprogress=function(){},r.onload=function(){return i.loadXML(r.responseText),n(null,i)}):n()},e}(),t.exports=r},{}],13:[function(e,t,n){var r;r=function(){function e(){}return e.xhr=function(){var e;return e=new window.XMLHttpRequest,"withCredentials"in e?e:void 0},e.supported=function(){return!!this.xhr()},e.get=function(e,t,n){var r;try{return r=this.xhr(),r.open("GET",e),r.timeout=t.timeout||0,r.withCredentials=t.withCredentials||!1,r.send(),r.onreadystatechange=function(){return 4===r.readyState?n(null,r.responseXML):void 0}}catch(i){return n()}},e}(),t.exports=r},{}],14:[function(e,t,n){var r;r=function(){function e(){}return e.track=function(e,t){var n,r,i,a,o,s;for(r=this.resolveURLTemplates(e,t),s=[],a=0,o=r.length;o>a;a++)n=r[a],"undefined"!=typeof window&&null!==window&&(i=new Image,s.push(i.src=n));return s},e.resolveURLTemplates=function(e,t){var n,r,i,a,o,s,l,u,c;r=[],null==t&&(t={}),"CACHEBUSTING"in t||(t.CACHEBUSTING=Math.round(1e10*Math.random())),t.random=t.CACHEBUSTING;for(u=0,c=e.length;c>u;u++)if(n=e[u],s=n){for(i in t)l=t[i],a="["+i+"]",o="%%"+i+"%%",s=s.replace(a,l),s=s.replace(o,l);r.push(s)}return r},e.storage=function(){var e,t,n,r;try{n="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(i){r=i,n=null}return t=function(e){var t,n;try{if(n="__VASTUtil__",e.setItem(n,n),e.getItem(n)!==n)return!0}catch(r){return t=r,!0}return!1},(null==n||t(n))&&(e={},n={length:0,getItem:function(t){return e[t]},setItem:function(t,n){e[t]=n,this.length=Object.keys(e).length},removeItem:function(t){delete e[t],this.length=Object.keys(e).length},clear:function(){e={},this.length=0}}),n}(),e}(),t.exports=r},{}]},{},[6])(6)}(),{deepCopy:function(e,t){for(var n in t)t.hasOwnProperty(n)&&"object"==typeof t[n]&&null!==t[n]?(e.hasOwnProperty(n)||(Array.isArray(t[n])?e[n]=[]:e[n]={}),r.deepCopy(e[n],t[n])):e[n]=t[n]},topLevelDomains:"abb,abbott,abogado,ac,academy,accenture,accountant,accountants,active,actor,ad,ads,adult,ae,aeg,aero,af,afl,ag,agency,ai,aig,airforce,airtel,al,allfinanz,alsace,am,amsterdam,an,android,ao,apartments,app,aq,aquarelle,ar,archi,army,arpa,as,asia,associates,at,attorney,au,auction,audio,auto,autos,aw,ax,axa,az,azure,ba,band,bank,bar,barcelona,barclaycard,barclays,bargains,bauhaus,bayern,bb,bbc,bbva,bcn,bd,be,beer,berlin,best,bf,bg,bh,bharti,bi,bible,bid,bike,bing,bingo,bio,biz,bj,black,blackfriday,bloomberg,blue,bm,bmw,bn,bnl,bnpparibas,bo,boats,bond,boo,boutique,br,bradesco,bridgestone,broker,brother,brussels,bs,bt,budapest,build,builders,business,buzz,bv,bw,by,bz,bzh,ca,cab,cafe,cal,camera,camp,cancerresearch,canon,capetown,capital,caravan,cards,care,career,careers,cars,cartier,casa,cash,casino,cat,catering,cba,cbn,cc,cd,center,ceo,cern,cf,cfa,cfd,cg,ch,channel,chat,cheap,chloe,christmas,chrome,church,ci,cisco,citic,city,ck,cl,claims,cleaning,click,clinic,clothing,cloud,club,cm,cn,co,coach,codes,coffee,college,cologne,com,commbank,community,company,computer,condos,construction,consulting,contractors,cooking,cool,coop,corsica,country,coupons,courses,cr,credit,creditcard,cricket,crown,crs,cruises,cu,cuisinella,cv,cw,cx,cy,cymru,cyou,cz,dabur,dad,dance,date,dating,datsun,day,dclk,de,deals,degree,delivery,democrat,dental,dentist,desi,design,dev,diamonds,diet,digital,direct,directory,discount,dj,dk,dm,dnp,do,docs,dog,doha,domains,doosan,download,drive,durban,dvag,dz,earth,eat,ec,edu,education,ee,eg,email,emerck,energy,engineer,engineering,enterprises,epson,equipment,er,erni,es,esq,estate,et,eu,eurovision,eus,events,everbank,exchange,expert,exposed,express,fail,faith,fan,fans,farm,fashion,feedback,fi,film,finance,financial,firmdale,fish,fishing,fit,fitness,fj,fk,flights,florist,flowers,flsmidth,fly,fm,fo,foo,football,forex,forsale,forum,foundation,fr,frl,frogans,fund,furniture,futbol,fyi,ga,gal,gallery,game,garden,gb,gbiz,gd,gdn,ge,gent,genting,gf,gg,ggee,gh,gi,gift,gifts,gives,gl,glass,gle,global,globo,gm,gmail,gmo,gmx,gn,gold,goldpoint,golf,goo,goog,google,gop,gov,gp,gq,gr,graphics,gratis,green,gripe,gs,gt,gu,guge,guide,guitars,guru,gw,gy,hamburg,hangout,haus,healthcare,help,here,hermes,hiphop,hitachi,hiv,hk,hm,hn,hockey,holdings,holiday,homedepot,homes,honda,horse,host,hosting,hoteles,hotmail,house,how,hr,ht,hu,ibm,icbc,icu,id,ie,ifm,il,im,immo,immobilien,in,industries,infiniti,info,ing,ink,institute,insure,int,international,investments,io,iq,ir,irish,is,it,iwc,java,jcb,je,jetzt,jewelry,jlc,jll,jm,jo,jobs,joburg,jp,jprs,juegos,kaufen,kddi,ke,kg,kh,ki,kim,kitchen,kiwi,km,kn,koeln,komatsu,kp,kr,krd,kred,kw,ky,kyoto,kz,la,lacaixa,land,lasalle,lat,latrobe,law,lawyer,lb,lc,lds,lease,leclerc,legal,lgbt,li,liaison,lidl,life,lighting,limited,limo,link,live,lk,loan,loans,lol,london,lotte,lotto,love,lr,ls,lt,ltda,lu,lupin,luxe,luxury,lv,ly,ma,madrid,maif,maison,management,mango,market,marketing,markets,marriott,mba,mc,md,me,media,meet,melbourne,meme,memorial,men,menu,mg,mh,miami,microsoft,mil,mini,mk,ml,mm,mma,mn,mo,mobi,moda,moe,monash,money,montblanc,mormon,mortgage,moscow,motorcycles,mov,movie,movistar,mp,mq,mr,ms,mt,mtn,mtpc,mu,museum,mv,mw,mx,my,mz,na,nadex,nagoya,name,navy,nc,ne,nec,net,netbank,network,neustar,new,news,nexus,nf,ng,ngo,nhk,ni,nico,ninja,nissan,nl,no,np,nr,nra,nrw,ntt,nu,nyc,nz,office,okinawa,om,omega,one,ong,onl,online,ooo,oracle,org,organic,osaka,otsuka,ovh,pa,page,panerai,paris,partners,parts,party,pe,pf,pg,ph,pharmacy,philips,photo,photography,photos,physio,piaget,pics,pictet,pictures,pink,pizza,pk,pl,place,play,plumbing,plus,pm,pn,pohl,poker,porn,post,pr,praxi,press,pro,prod,productions,prof,properties,property,ps,pt,pub,pw,py,qa,qpon,quebec,racing,re,realtor,realty,recipes,red,redstone,rehab,reise,reisen,reit,ren,rent,rentals,repair,report,republican,rest,restaurant,review,reviews,rich,ricoh,rio,rip,ro,rocks,rodeo,rs,rsvp,ru,ruhr,run,rw,ryukyu,sa,saarland,sakura,sale,samsung,sandvik,sandvikcoromant,sap,sarl,saxo,sb,sc,sca,scb,schmidt,scholarships,school,schule,schwarz,science,scor,scot,sd,se,seat,sener,services,sew,sex,sexy,sg,sh,shiksha,shoes,show,shriram,si,singles,site,sj,sk,ski,sky,skype,sl,sm,sn,sncf,so,soccer,social,software,sohu,solar,solutions,sony,soy,space,spiegel,spreadbetting,sr,st,starhub,statoil,studio,study,style,su,sucks,supplies,supply,support,surf,surgery,suzuki,sv,swatch,swiss,sx,sy,sydney,systems,sz,taipei,tatar,tattoo,tax,taxi,tc,td,team,tech,technology,tel,telefonica,temasek,tennis,tf,tg,th,thd,theater,tickets,tienda,tips,tires,tirol,tj,tk,tl,tm,tn,to,today,tokyo,tools,top,toray,toshiba,tours,town,toys,tr,trade,trading,training,travel,trust,tt,tui,tv,tw,tz,ua,ug,uk,university,uno,uol,us,uy,uz,va,vacations,vc,ve,vegas,ventures,versicherung,vet,vg,vi,viajes,video,villas,vision,vista,vistaprint,vlaanderen,vn,vodka,vote,voting,voto,voyage,vu,wales,walter,wang,watch,webcam,website,wed,wedding,weir,wf,whoswho,wien,wiki,williamhill,win,windows,wme,work,works,world,ws,wtc,wtf,xbox,xerox,xin,xn--1qqw23a,xn--30rr7y,xn--3bst00m,xn--3ds443g,xn--3e0b707e,xn--45brj9c,xn--45q11c,xn--4gbrim,xn--55qw42g,xn--55qx5d,xn--6frz82g,xn--6qq986b3xl,xn--80adxhks,xn--80ao21a,xn--80asehdb,xn--80aswg,xn--90a3ac,xn--90ais,xn--9et52u,xn--b4w605ferd,xn--c1avg,xn--cg4bki,xn--clchc0ea0b2g2a9gcd,xn--czr694b,xn--czrs0t,xn--czru2d,xn--d1acj3b,xn--d1alf,xn--estv75g,xn--fiq228c5hs,xn--fiq64b,xn--fiqs8s,xn--fiqz9s,xn--fjq720a,xn--flw351e,xn--fpcrj9c3d,xn--fzc2c9e2c,xn--gecrj9c,xn--h2brj9c,xn--hxt814e,xn--i1b6b1a6a2e,xn--imr513n,xn--io0a7i,xn--j1amh,xn--j6w193g,xn--kcrx77d1x4a,xn--kprw13d,xn--kpry57d,xn--kput3i,xn--l1acc,xn--lgbbat1ad8j,xn--mgb9awbf,xn--mgba3a4f16a,xn--mgbaam7a8h,xn--mgbab2bd,xn--mgbayh7gpa,xn--mgbbh1a71e,xn--mgbc0a9azcg,xn--mgberp4a5d4ar,xn--mgbpl2fh,xn--mgbx4cd0ab,xn--mxtq1m,xn--ngbc5azd,xn--node,xn--nqv7f,xn--nqv7fs00ema,xn--nyqy26a,xn--o3cw4h,xn--ogbpf8fl,xn--p1acf,xn--p1ai,xn--pgbs0dh,xn--q9jyb4c,xn--qcka1pmc,xn--rhqv96g,xn--s9brj9c,xn--ses554g,xn--unup4y,xn--vermgensberater-ctb,xn--vermgensberatung-pwb,xn--vhquv,xn--vuq861b,xn--wgbh1c,xn--wgbl6a,xn--xhq521b,xn--xkc2al3hye2a,xn--xkc2dl3a5ee0h,xn--y9a3aq,xn--yfro4i67o,xn--ygbi2ammx,xn--zfr164b,xxx,xyz,yachts,yandex,ye,yodobashi,yoga,yokohama,youtube,yt,za,zip,zm,zone,zuerich,zw",getDomainFromUrl:function(e,t){t||(t=r.topLevelDomains),e.indexOf("/")>-1&&(e=e.split("/")[0]),e=e.toLowerCase(),"127.0.0.1"===e&&(e="localhost");var n=e.split(".");"www"===n[0]&&"com"!==n[1]&&n.shift();for(var i,a=n.length,o=a,s=n[n.length-1].length;i=n[--o];)if(0===o||a-2>o||i.length<s||t.indexOf(i)<0){for(o===a-1&&o>0&&(o--,i=n[o]),o+=1;a>o;o++)i+="."+n[o];return i}},isFunction:function(e){var t={};return!!e&&"[object Function]"===t.toString.call(e)},addHtmlStructure:function(t,n,r,i,a,o){i=i||!1;var s=document.createElement("figure");s.setAttribute("class",d+""+t.prefix+"vc"),s.style.padding="0",s.style.margin="0",s.style.position="relative",s.style.overflow="hidden",s.style.minHeight="150px",s.style.minWidth="260px",s.style.boxSizing="content-box",n.appendChild(s);var l=r.style(),u=function(){l.hasOwnProperty("width")&&l.hasOwnProperty("aspectratio")?s.style.height=Math.round(s.clientWidth/l.aspectratio)+"px":l.hasOwnProperty("height")&&l.hasOwnProperty("aspectratio")&&(s.style.width=Math.round(s.clientHeight*l.aspectratio)+"px")};l.hasOwnProperty("width")&&l.hasOwnProperty("aspectratio")?(s.style.width=l.width.value+l.width.unit,u(),window.onload=u,e.addEventListener("resize",function(){s.style.height=Math.round(s.clientWidth/l.aspectratio)+"px"})):l.hasOwnProperty("height")&&l.hasOwnProperty("aspectratio")?(s.style.height=l.height.value+l.height.unit,u(),window.onload=u,e.addEventListener("resize",function(){s.style.width=Math.round(s.clientHeight*l.aspectratio)+"px"})):l.hasOwnProperty("width")&&l.hasOwnProperty("height")&&(s.style.width=l.width.value+l.width.unit,s.style.height=l.height.value+l.height.unit);var c;if(i){c=document.createElement("video"),c.setAttribute("id",d+""+t.prefix+"video-"+n.getAttribute("id")),c.setAttribute("width","100%"),c.setAttribute("height","100%");var p=r.playback(),h=r.source();p.hasOwnProperty("autoplay")&&p.autoplay&&c.setAttribute("autoplay","autoplay"),p.hasOwnProperty("muted")&&p.muted&&(c.muted=r.playback.muted),h.hasOwnProperty("poster")&&h.poster&&c.setAttribute("poster",h.poster);var f=function(){c.currentTime>0&&(c.removeEventListener("timeupdate",f),c.getAttribute("poster")&&c.removeAttribute("poster"))};c.addEventListener("timeupdate",f)}else c=document.createElement("div"),c.setAttribute("id",d+""+t.prefix+"video-"+n.getAttribute("id"));return s.appendChild(c),"hidden"===t.visibility&&(s.style.display="none"),s},extractBitrateFromString:function(e,t){return isNaN(t)?(t=t.toLowerCase().trim().replace(/,/g,"."),t.indexOf("mbps")>-1?1e6*t.split("m")[0]:t.indexOf("kbps")>-1?1e3*t.split("k")[0]:t.indexOf("bps")>-1?1*t.split("b")[0]:(console.warn("Bitrate format not recognized for "+t),"max"===e?1/0:0)):t===1/0?t:1*t},createErrorMsg:function(){var e=document.createElement("p");return e.setAttribute("class",d+"error-message"),e.style.backgroundColor="black",e.style.color="white",e.style.padding="20px",e.style.textAlign="center",e},createErrorMsgBox:function(){var e=document.createElement("div");return e.setAttribute("class",d+"error"),e},splitValueAndUnit:function(e){e+="";var t=/(\d+(?:\.\d+)?)/g,n=/([^0-9\.]+)/g,r={},i=e.match(t);r.value=parseFloat(i[0]);var a=e.match(n);return a&&a.length>0?r.unit=a[0]:r.unit="px",r},displaySetupError:function(e,t){var n=r.createErrorMsg(),i=r.createErrorMsgBox();n.innerHTML=e.message,i.appendChild(n),t.appendChild(i)},splitPlayerAndStreamingTechnology:function(e){var t={player:"",streaming:""};if(e&&"string"==typeof e){e=e.split(".");for(var n=0,r=0;r<e.length;r++)""===e[r]&&(e[r]=null,n++);if(n===e.length)return;return t.player=e[0],t.streaming=e[1],t}},getSystemLanguageArray:function(){var e=function(){var e,t={},n=[],r=function(e){e&&(e.indexOf("-")>-1&&(e=e.split("-")[0]),t[e]||(n.push(e),t[e]={}))};if(r(navigator.language),navigator.languages)for(e=0;e<navigator.languages.length;e++)r(navigator.languages[e]);return n}();return function(){return e.slice()}}()}),i=function(){var e={},t=function(t,n,r,i){return new Promise(function(a,o){var s;if(n=n||"GET",i=i||{},"GET"===n&&e.hasOwnProperty(t)&&e[t])return void a(e[t]);s=new XMLHttpRequest;try{s.open(n,t);for(var l in i)i.hasOwnProperty(l)&&s.setRequestHeader(l,i[l]);s.addEventListener("readystatechange",function(){s.readyState===s.DONE&&(s.status>=200&&s.status<300?(e[t]=s.response,a(s.response)):o(s.status))},!1),s.send(r)}catch(u){o(u)}})},n=function(t){return new Promise(function(n,r){if(e.hasOwnProperty(t)&&e[t])return void n();var i=document.getElementsByTagName("head")[0]||document.documentElement,a=!1,o=document.createElement("script");o.type="text/javascript",o.src=t,o.async=!0,o.onload=o.onreadystatechange=function(){a||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(a=!0,e[t]=!0,o.onload=o.onreadystatechange=null,i&&o.parentNode&&i.removeChild(o),n())},o.onerror=r,i.insertBefore(o,i.firstChild)})},r=function(t){if(!e.hasOwnProperty(t)||!e[t]){var n=document.getElementsByTagName("head")[0]||document.documentElement,r=document.createElement("link");r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",t),n.insertBefore(r,n.firstChild),e[t]=!0}};return{load:t,loadScript:n,loadCSS:r}},a=function(t){var r="12.0.0",a="11.2.0";void 0===t&&(t=navigator.userAgent),t.toLowerCase().indexOf("linux")>-1&&(r=a);var o=g.get("browserList");o=o&&o.list?o.list:["Chrome/41\\.0\\.2272\\.89","Chrome/41\\.0\\.2272\\.101"];var s={validForSeconds:86400,updateUrl:"https://bitdash-a.akamaihd.net/browserlist.json",list:o},l=function(){var e=g.get("browserException");if(!(e&&e.updateTimestamp>=(new Date).getTime()/1e3-s.validForSeconds)){var t=new i;t.load(s.updateUrl).then(function(e){e&&(s.list=JSON.parse(e),g.set("browserException",{list:s.list,updateTimestamp:Math.round((new Date).getTime()/1e3)}))})}};l();var u=function(){var e,n,r=!1;for(n=0;n<s.list.length&&(e=new RegExp(s.list[n],"i"),!(r=e.test(t)));n++);return r},c=function(){var e=document.createElement("video");return"maybe"===e.canPlayType("application/vnd.apple.mpegURL")||"maybe"===e.canPlayType("application/x-mpegURL")||"maybe"===e.canPlayType("audio/mpegurl")||"maybe"===e.canPlayType("audio/x-mpegurl")},p=function(){var t="MediaSource"in e&&e.MediaSource,n="WebKitMediaSource"in e&&e.WebKitMediaSource;return t?t=MediaSource.isTypeSupported('video/mp4; codecs="avc1.42c00d"'):n&&(n=WebKitMediaSource.isTypeSupported('video/mp4; codecs="avc1.42c00d"')),t||n},d=function(){return 0!==n.getFlashPlayerVersion().major&&n.hasFlashPlayerVersion(r)},h=function(){return!0},f=function(){return/Android/i.test(t)||/IEMobile/i.test(t)||/Safari/i.test(t)&&/Mobile/i.test(t)}(),y=function(){return r},v=function(){return"function"==typeof document.createElement("video").canPlayType},b=function(){var e=[];return p()&&e.push("dash"),e},w=function(){return d()?["dash","hls"]:[]},k=function(){var e=[];return c()&&e.push("hls"),v()&&h()&&e.push("progressive"),e},x=function(e,t){var n,r=!1,i=[];for("html5"===e?i=b():"flash"===e?i=w():"native"===e&&(i=k()),n=0;n<i.length&&!(r=t===i[n]);n++);return r},T=function(){var e,t,n=[{player:"html5",streaming:"dash"},{player:"native",streaming:"hls"},{player:"flash",streaming:"dash"},{player:"flash",streaming:"hls"},{player:"native",streaming:"progressive"}],r=[];for(e=0;e<n.length;e++)t=n[e],m.supports(t.player,t.streaming)&&r.push(t);return r},S=function(){return new T};return{supports:x,isMobile:f,getMinimumFlashVersion:y,getTechSupportedByPlatform:S,isBrowserVersionIncompatibleForMSE:u}},o=function(e){var t="bitdash_config",n={},r=function(){var e=366,t=new Date;return t.setTime(t.getTime()+864e5*e),"expires="+t.toUTCString()}(),i=function(e){var t,n,r=e+"=",i=document.cookie.split(";");for(t=0;t<i.length;t++){for(n=i[t];" "==n.charAt(0);)n=n.substring(1);if(0===n.indexOf(r))return n.substring(r.length,n.length)}return""},a=function(e){if(e)try{n=JSON.parse(e)}catch(t){}},o=function(){a(e?localStorage.getItem(t):i(t))},s=function(){try{e?localStorage.setItem(t,JSON.stringify(n)):document.cookie=t+"="+JSON.stringify(n)+"; "+r}catch(i){}},l=function(e){return n.hasOwnProperty(e)?n[e]:void 0},u=function(e,t){n[e]=t,s()},c=function(){o()};return c(),{get:l,set:u}};console||(console={}),console.debug||(console.debug=function(){}),console.log||(console.log=function(){}),console.warn||(console.warn=function(){}),console.error||(console.error=function(){});var s="pro",l="3.3.0",u="bitdash ",c=l+" "+s,p=u+c,d="bitdash-",h=["localhost","grainandmortar.com"],f=r.getDomainFromUrl(location.hostname),g=new o(!!localStorage&&"function"==typeof localStorage.getItem&&"function"==typeof localStorage.setItem),m=new a(navigator.userAgent),y={},v={},b=function(){var e="",t=(document.currentScript||function(){for(var e=document.getElementsByTagName("script"),t=e.length,n=e[t-1],r=0;t>r;r++)if(e[r].src.indexOf("bitdash.min.js")>-1)return e[r];return n}()).getAttribute("src");return t.lastIndexOf("/")>-1&&(e=t.substring(0,t.lastIndexOf("/")+1)),e}(),w={flash:b+"bitdashplayer.swf",js:b+"bitdashplayer.min.js",css:b+"bitdashplayer.min.css",cast:"//www.gstatic.com/cv/js/sender/v1/cast_sender.js"},k={playback:{autoplay:!1,muted:!1,volume:100,restoreUserSettings:!0,timeShift:!0,seeking:!0},source:{},style:{width:{value:640,unit:"px"},aspectratio:16/9,controls:!0,autoHideControls:!0,bufferingOverlay:!0,playOverlay:!0,keyboard:!0,mouse:!0,subtitlesHidden:!1,showErrors:!0},tweaks:{autoqualityswitching:!0,wmode:"transparent"},adaptation:{mobile:{bitrates:{minSelectableAudioBitrate:0,maxSelectableAudioBitrate:1/0,minSelectableVideoBitrate:0,maxSelectableVideoBitrate:1/0}},desktop:{bitrates:{minSelectableAudioBitrate:0,maxSelectableAudioBitrate:1/0,minSelectableVideoBitrate:0,maxSelectableVideoBitrate:1/0}}},cast:{enable:!1},events:{}},x=function(e){var n=function(n){var r,i=new t(f+n,"TEXT").getHash("SHA-256","HEX"),a=!1;for(r=0;r<e.length&&!(a=i===e[r]);r++);return a},r=function(t){var r,i,a=/[^A-Za-z0-9]/,o=!1;for(r=t.indexOf(",")>-1?t.split(","):[t],i=0;i<r.length&&(t=r[i].trim(),o=!a.test(t))&&!(o=n(t,e));i++);if(!o){var s=f;for(i=0;i<h.length;i++)if(""===h[i]||h[i]===s)throw new A(1002,s);throw new A(1008,[s,h,s])}return o};return{check:r}},T=function(e){var t={},n=new a,i=new x(["b259743d5ea68843545eaddf47d154197b4ea9c0f3a3865e86c73654c3c169c4","e317400eb4a11671dd33ef9258a01c57931a3d6eb4bb6c5030d51e9acf5a4334"]),o=function(e,t){var n=!1,i=!1,a=!1;if(t.hasOwnProperty("style")?(a=t.style.hasOwnProperty("width"),i=t.style.hasOwnProperty("height"),n=t.style.hasOwnProperty("aspectratio")):t.style={},n){var o;e.style.aspectratio=(t.style.aspectratio+"").replace(",","."),e.style.aspectratio.indexOf(":")>-1?o=e.style.aspectratio.split(":"):e.style.aspectratio.indexOf("/")>-1?o=e.style.aspectratio.split("/"):isNaN(parseFloat(e.style.aspectratio))?(delete e.style.aspectratio,n=!1):e.style.aspectratio=parseFloat(e.style.aspectratio),o&&Array.isArray(o)&&o.length>1&&(e.style.aspectratio=parseFloat(o[0])/parseFloat(o[1]))}t.style.hasOwnProperty("width")&&(e.style.width=r.splitValueAndUnit(t.style.width)),t.style.hasOwnProperty("height")&&(e.style.height=r.splitValueAndUnit(t.style.height)),a&&n||a&&i||i&&n||(!n||a||i?a&&!i&&!n||i&&!a&&!n?e.style.aspectratio=k.style.aspectratio:(e.style.width={value:k.style.width.value,unit:k.style.width.unit},e.style.aspectratio=k.style.aspectratio):e.style.width={value:k.style.width.value,unit:k.style.width.unit})},l=function(e){if(r.deepCopy(t,k),r.deepCopy(t,e),t.hasOwnProperty("drm")&&t.drm&&t.hasOwnProperty("source")&&t.source&&!t.source.hasOwnProperty("drm")&&(t.source.drm=t.drm),t.hasOwnProperty("skin")&&"pro"!==s&&"enterprise"!==s&&(delete t.skin,console.warn("Skinning is only available in bitdash pro or enterprise version! Purchase now on http://www.dash-player.com")),"pro"!==s&&"enterprise"!==s&&t.hasOwnProperty("tweaks")&&(t.tweaks.hasOwnProperty("context_menu_entries")||t.tweaks.hasOwnProperty("CONTEXT_MENU_ENTRIES"))&&(delete t.tweaks.context_menu_entries,delete t.tweaks.CONTEXT_MENU_ENTRIES,console.warn("Adding context menu entries is only available in bitdash pro or enterprise version! Purchase now on http://www.dash-player.com")),n.isMobile?t.adaptation=t.adaptation.mobile:t.adaptation=t.adaptation.desktop,t.adaptation.bitrates.minSelectableAudioBitrate=r.extractBitrateFromString("min",t.adaptation.bitrates.minSelectableAudioBitrate),t.adaptation.bitrates.maxSelectableAudioBitrate=r.extractBitrateFromString("max",t.adaptation.bitrates.maxSelectableAudioBitrate),t.adaptation.bitrates.minSelectableVideoBitrate=r.extractBitrateFromString("min",t.adaptation.bitrates.minSelectableVideoBitrate),t.adaptation.bitrates.maxSelectableVideoBitrate=r.extractBitrateFromString("max",t.adaptation.bitrates.maxSelectableVideoBitrate),!t.source.hasOwnProperty("mobilempd")||!n.isMobile&&t.source.hasOwnProperty("mpd")||(console.warn("The source.mpd attribute has been deprecated and support will be removed in bitdash 4.0. Please use the adaptation object instead"),t.source.mpd=t.source.mobilempd,delete t.source.mobilempd),t.source.hasOwnProperty("mpd")&&(console.warn("The source.mpd attribute has been deprecated and support will be removed in bitdash 4.0. Please use source.dash instead"),t.source.dash=t.source.mpd,delete t.source.mpd),n.isMobile&&(t.playback.autoplay=!1),t.style.hasOwnProperty("width")&&delete t.style.width,t.style.hasOwnProperty("height")&&delete t.style.height,t.style.hasOwnProperty("aspectratio")&&delete t.style.aspectratio,o(t,e),t.style.hasOwnProperty("ux"))for(var i=["controls","playOverlay","bufferingOverlay","keyboard","mouse"],a=!!t.style.ux,l=0;l<i.length;l++)t.style[i[l]]=a;t.hasOwnProperty("location")&&t.location&&(t.location.hasOwnProperty("flash")&&(w.flash=t.location.flash),t.location.hasOwnProperty("html5")&&(w.js=t.location.html5),t.location.hasOwnProperty("css")&&(w.css=t.location.css))},u=function(e,n){return n=n||t,e?n.hasOwnProperty(e)?t[e]:{}:n;
},c=function(){return e},p=function(){var e={};e.autoPlay=t.playback.autoplay,e.muted=t.playback.muted,e.controlBarAutoHide=t.style.autoHideControls,e.controlBarAutoHideTimeout=4,e.playButtonOverlay=t.style.playOverlay,e.volume=t.playback.volume,e.bufferingOverlay=t.style.bufferingOverlay,e.keyboard=!!t.style.keyboard,e.mouse=!!t.style.mouse,t.style.controls===!1?e.controlBarMode="none":e.controlBarMode="docking",t.source.hasOwnProperty("poster")&&(e.poster=t.source.poster);var n=t.adaptation.bitrates;e.minSelectableAudioBitrate=n.minSelectableAudioBitrate,e.maxSelectableAudioBitrate=n.maxSelectableAudioBitrate,e.minSelectableVideoBitrate=n.minSelectableVideoBitrate,e.maxSelectableVideoBitrate=n.maxSelectableVideoBitrate,t.source&&t.source.drm&&t.source.drm.hasOwnProperty("clearkey")&&t.source.drm.clearkey.hasOwnProperty("LA_URL")&&(e.bitdash_bitClearKeyService=t.source.drm.clearkey.LA_URL);for(var r in t.tweaks)t.tweaks.hasOwnProperty(r)&&("object"==typeof t.tweaks[r]?e["bitdash_"+r.toUpperCase()]=JSON.stringify(t.tweaks[r]):e["bitdash_"+r.toUpperCase()]=t.tweaks[r]);return"object"==typeof t.skin&&(e.bitskin=encodeURIComponent(JSON.stringify(t.skin))),t.style.hasOwnProperty("subtitlesHidden")&&t.style.subtitlesHidden&&(e.bitdash_SUBTITLES_HIDDEN=!!t.style.subtitlesHidden),t.playback.hasOwnProperty("timeShift")&&(e.bitdash_TIME_SHIFT=!!t.playback.timeShift),e},d=function(n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r],e[r]=n[r])},h=function(){return[]},f=function(){if(!e)throw new A(1011);if(!e.hasOwnProperty("key"))throw new A(1001);i.check(e.key),l(e)};return f(),{playback:function(){return u("playback")},source:function(){return u("source")},style:function(){return u("style")},tweaks:function(){return u("tweaks")},adaptation:function(){return u("adaptation")},drm:function(){return u("drm",t.source)},skin:function(){return t.skin},cast:function(){return u("cast")},get:u,getUserConfig:c,getFlashVars:p,update:d,getPlayerPreference:h}},S=function(e,t){if(S.hasOwnProperty(e)||(e=4e3),this.code=e,this.msg=S[this.code],this.timestamp=(new Date).getTime(),t){"string"==typeof t&&(t=[t]);for(var n=0;n<t.length;n++)this.msg=this.msg.replace("{{"+n+"}}",t[n])}};S[4e3]="Unknown Error",S[4001]="Ad manifest could not be loaded",S[4002]="Ad manifest could not be parsed",S[4003]="Ad manifest not supported",S[4004]="invalid Ad config",S[4005]="unsupported ad client",S[4006]="{{0}} ads are not yet supported",S[4007]="tried to add more than one {{0}} creative";var A=function(e,t){if(A.hasOwnProperty(e)||(e=1e3),this.code=e,this.message=A[this.code],this.timestamp=(new Date).getTime(),t){"string"==typeof t&&(t=[t]);for(var n=0;n<t.length;n++)this.message=this.message.replace("{{"+n+"}}",t[n])}};A[1e3]="Unknown Error",A[1001]="No key was provided",A[1002]='Key is not compatible with the provided bitdash package. Please insert the key which was provided after registering your domain ({{0}}) at <a href="http://www.dash-player.com" target="_blank">http://www.dash-player.com</a>',A[1003]="No source was provided",A[1004]="There was an error when inserting the HTML video element",A[1005]="An error occurred during creating the flash player",A[1006]='No supported technology was detected, i.e. neither Flash nor the MediaSource Extension was found and no HLS manifest was given or HLS is also not supported. Please download the Flash Player from <a href="http://get.adobe.com/flashplayer/" target="_blank">http://get.adobe.com/flashplayer/</a> or try another browser.',A[1007]='Your flash player version is not supported, please upgrade to watch the video: <a href="http://get.adobe.com/flashplayer/" target="_blank">http://get.adobe.com/flashplayer/</a><br>(Your Flash Version: {{0}} | Required Flash Version: {{1}}',A[1008]='You are currently on <strong>{{0}}</strong>, but this bitdash version is locked to the following domains: {{1}}<br><br>If you want to use the player also on this domain, please go to <a href="http://www.dash-player.com" target="_blank">http://www.dash-player.com</a> and register a player for {{2}}',A[1009]="Could not load skin, using the default bitdash skin",A[1010]='Protocol not supported. This site has been loaded using "file" protocol, but unfortunately this is not supported. Please load the page using a web server (using http or https)',A[1011]="No configuration was provided",A[1012]="Could not load JavaScript player file",A[1013]="Unsupported stream type",A[1014]="Unknown player type",A[1015]="The player you tried to force ({{0}}) is not supported.";var E=function(e,t){var n={},i="bit"+(""+Math.random()).slice(3,15);v[i]=function(t,r){var i,a,o;if(n.hasOwnProperty(t)&&n[t].length>0){r.hasOwnProperty("type")||(r.type=t);var s=n[t];for(i=0;i<s.length;i++)s[i]&&"function"==typeof s[i]&&(a=s[i].call(e,r),a&&(o=a))}return o}.bind(e),this.add=function(e,t){n.hasOwnProperty(e)&&n[e].push(t)},this.addFromObject=function(e){for(var t in e)e.hasOwnProperty(t)&&this.add(t,e[t])},this.remove=function(e,t){if(n.hasOwnProperty(e))for(var r=n[e],i=0;i<r.length;i++)if(r[i]===t){r[i]=null;break}},this.getCallbackID=function(){return i},this.throwSetupError=function(i){if(i&&i instanceof A){if(n.hasOwnProperty("onError")&&n.onError.length>0)for(var a=0;a<n.onError.length;a++)r.isFunction(n.onError[a])&&n.onError[a]({type:"onError",timestamp:i.timestamp,code:i.code,message:i.message});var o=i.code+": "+i.message;new O(e,o),r.displaySetupError(i,t)}else console.error(i)};var a=function(){for(var e=0;e<L.length;e++)n[L[e]]=[]};a()},L=["onReady","onPlay","onPause","onSeek","onVolumeChange","onMute","onUnmute","onFullscreenEnter","onFullscreenExit","onPlaybackFinished","onError","onStartBuffering","onStopBuffering","onAudioChange","onSubtitleChange","onAudioLanguageChange","onSubtitlesLanguageChange","onVideoDownloadQualityChange","onAudioDownloadQualityChange","onVideoPlaybackQualityChange","onAudioPlaybackQualityChange","onTimeChanged","onMetadata","onCueEnter","onCueExit","onShowControls","onHideControls","onVideoAdaptation","onAudioAdaptation"],C=function(e,t,n){var a,o,l,u,c=this,h=!1,f=!1,g=!1,b={player:"unknown",streaming:"unknown"},w=new P,k=new E(c,e),x=new _(c),S=function(e){return new Promise(function(t,n){var r=new i;e=decodeURIComponent(e),r.load(e).then(function(e){e?t(JSON.parse(e)):n()})["catch"](function(){n()})})},L=function(){a&&h?a.setSkin(encodeURIComponent(JSON.stringify(u.skin()))):setTimeout(L,250)},C=function(t){"string"==typeof u.skin()&&S(u.skin()).then(function(e){u.update({skin:e}),L()}),w.getInstance(n,u,k.getCallbackID(),e,t).then(function(e){a=e.bitdashPlayer,b=e.technology,o=e.playerFigure,l&&l(o),f=!0})["catch"](function(e){e.hasOwnProperty("code")&&e.hasOwnProperty("message")?k.throwSetupError(e):console.error(e)})};this.getAvailableAudioLanguages=function(){return console.warn('"getAvailableAudioLanguages" is deprecated and will be removed in bitdash 4.0. Please use "getAvailableAudio" instead.'),a&&h?a.getAvailableAudioLanguages():!1},this.getAvailableSubtitleLanguages=function(){return console.warn('"getAvailableSubtitleLanguages" is deprecated and will be removed in bitdash 4.0. Please use "getAvailableSubtitles" instead.'),a&&h?a.getAvailableSubtitleLanguages():!1},this.getCurrentAudioLanguage=function(){return console.warn('"getCurrentAudioLanguage" is deprecated and will be removed in bitdash 4.0. Please use "getAudio" instead.'),a&&h?a.getCurrentAudioLanguage():!1},this.getCurrentSubtitleLanguage=function(){return console.warn('"getCurrentSubtitleLanguage" is deprecated and will be removed in bitdash 4.0. Please use "getSubtitle" instead.'),a&&h?a.getCurrentSubtitleLanguage():!1};var N=function(){for(var e=["isReady","isPlaying","isPaused","isMuted","isFullscreen","isStalled","isLive","hasEnded","getVolume","getCurrentTime","getDuration","getAvailableVideoQualities","getAvailableAudioQualities","getDroppedFrames","getAudioBufferLength","getVideoBufferLength","getTotalStalledTime","getDownloadedVideoData","getDownloadedAudioData","getPlaybackVideoData","getPlaybackAudioData","getMaxTimeShift","getTimeShift","getAvailableAudio","getAvailableSubtitles","getAudio","getSubtitle"],t=0;t<e.length;t++)c[e[t]]=function(){return a&&h?a[this]():!1}.bind(e[t])};this.setAudioLanguage=function(e){return console.warn('"setAudioLanguage" is deprecated and will be removed in bitdash 4.0. Please use "setAudio" instead.'),a&&h&&a.setAudioLanguage(e),c},this.setSubtitlesLanguage=function(e){return console.warn('"setSubtitlesLanguage" is deprecated and will be removed in bitdash 4.0. Please use "setSubtitle" instead.'),a&&h&&a.setSubtitlesLanguage(e),c},this.setVideoQuality=function(e){return a&&h&&(e=e||"auto",a.setVideoQuality(e)),c},this.setAudioQuality=function(e){return a&&h&&(e=e||"auto",a.setAudioQuality(e)),c},this.unload=function(){return a&&h&&(a.unload(),h=!1),c};var U=function(){for(var e=["seek","setVolume","setQueryParameters","setLastSegment","timeShift","setAudio","setSubtitle"],t=0;t<e.length;t++)c[e[t]]=function(e){return a&&h&&a[this](e),c}.bind(e[t])},R=function(){for(var e=["play","pause","mute","unmute","enterFullscreen","exitFullscreen","clearQueryParameters"],t=0;t<e.length;t++)c[e[t]]=function(){return a&&h&&a[this](),c}.bind(e[t])},B=function(){var e;c.isCasting=function(){if("pro"!==s&&"enterprise"!==s)console.warn("ChromeCast support is only available in bitdash pro or enterprise version! Purchase now on http://www.dash-player.com");else if(a&&h&&"function"==typeof a[this])return a[this]();return!1}.bind("isCasting"),c.setSkin=function(e){return console.log("The setSkin call will return a Promise instead of the player object itself as of bitdash 4.0."),"pro"!==s&&"enterprise"!==s?(console.warn("This feature is only available in bitdash pro or enterprise version! Purchase now on http://www.dash-player.com"),c):e?("string"==typeof e?S(e).then(function(e){u.update({skin:e}),L()})["catch"](function(){console.warn(new A(1009))}):(u.update({skin:e}),L()),c):c}.bind("setSkin");var t=["castVideo","castStop"];for(e=0;e<t.length;e++)c[t[e]]=function(){return"pro"!==s&&"enterprise"!==s?console.warn("ChromeCast support is only available in bitdash pro or enterprise version! Purchase now on http://www.dash-player.com"):a&&h&&"function"==typeof a[this]&&a[this](),c}.bind(t[e])};this.setup=function(e,t){if(console.log("The setup call will return a Promise instead of the player object itself as of bitdash 4.0."),a&&h){console.warn("player is already set up.");var n=u.skin();u.update(e);var i=u.skin();i&&i!==n&&L()}else try{e.hasOwnProperty("advertising")&&(e.hasOwnProperty("playback")||(e.playback={}),e.playback.autoplay=!1),u=new T(e),x.updateConfig(u),k.addFromObject(u.get("events")),t=r.splitPlayerAndStreamingTechnology(t),C(t),g=!0}catch(o){return k.throwSetupError(o),c}return c},this.addSubtitle=function(e,t,n,r,i){return a&&h&&("subtitle"===n||"caption"===n)&&a.addSubtitle(e,t,r,i),c},this.removeSubtitle=function(e){return a&&h&&a.removeSubtitle(e),c},this.addEventHandler=function(e,t){return k.add(e,t),c},this.removeEventHandler=function(e,t){return k.remove(e,t),c},this.getVersion=function(e){return e&&e&&a&&h?a.getVersion():p},this.getFigure=function(e){o?e(o):l=e},this.save=function(){x.save()},this.restore=function(){x.restore()},this.getStreamType=function(){return b.streaming},this.getPlayerType=function(){return b.player},this.getSupportedTech=function(){return m.getTechSupportedByPlatform()},this.isSetup=function(){return g};var I=function(e){var t={};if("string"==typeof e)console.warn("Loading a new source using a string is deprecated and will be removed in bitdash 4.0. Please use a source object instead."),t.dash=e;else{if("object"!=typeof e)return null;t=e,!t.hasOwnProperty("mobilempd")||t.hasOwnProperty("mpd")&&!m.isMobile||(t.dash=t.mobilempd,delete t.mobilempd)}return!t.hasOwnProperty("dash")&&t.hasOwnProperty("mpd")&&(t.dash=t.mpd),t.hasOwnProperty("mpd")&&delete t.mpd,t},F=function(){var t=e.getElementsByClassName(d+n.prefix+"vc")[0],r=e.getElementsByClassName(d+"ctxt-menu")[0],i=e.getElementsByClassName(d+"error")[0];t&&t.parentNode&&t.parentNode.removeChild(t),r&&r.parentNode&&r.parentNode.removeChild(r),i&&i.parentNode&&i.parentNode.removeChild(i)};this.load=function(e,t){console.log("The load call will return a Promise instead of the player object itself as of bitdash 4.0.");var n=function(e){a&&a.unload&&a.unload(),a=null,h=!1,F(),C(e)};if(e=I(e),u.update({source:e}),t)t=r.splitPlayerAndStreamingTechnology(t),b.streaming===t.streaming&&b.player===t.player?a.load(e[b.streaming],e.poster):n(t);else{var i=w.getSupportedTechSequence();if(i.length<1)return;e.hasOwnProperty(b.streaming)&&i[0].player===b.player&&i[0].streaming===b.streaming?a.load(e[b.streaming],e.poster):n()}},this.getConfig=function(){return u?u.getUserConfig():{}},this.getSnapshot=function(){return a&&h&&"flash"!==b.player?a.getSnapshot():null},this.setPlaybackSpeed=function(e){a&&h&&"flash"!==b.player&&a.setPlaybackSpeed(e)},this.getPlaybackSpeed=function(){return a&&h&&"flash"!==b.player?a.getPlaybackSpeed():1},this.destroy=function(){c.save(),c.unload(),F();for(var e in c)delete c[e];h=!1,a=null,y[t]=void 0,delete y[t],delete v[k.getCallbackID()],k=null};var M=function(){k.add("onMute",x.saveMuted),k.add("onUnmute",x.saveMuted),k.add("onVolumeChange",x.saveVolume),k.add("onAudioChange",x.saveAudio),k.add("onSubtitleChange",x.saveSubtitle)},j=function(){N(),U(),R(),B(),k.add("onError",function(t){if(t.code>=2e3&&3009!==t.code){F(),b={player:"unknown",streaming:"unknown"};var n=u.style();(!n.hasOwnProperty("showErrors")||n.showErrors)&&r.displaySetupError(t,e)}}),k.add("onReady",function(){h=!0;var e=u.playback(),t=e.hasOwnProperty("autoplay")&&!!e.autoplay;!t||c.isPlaying()||m.isMobile||c.play(),new O(c),(!e.hasOwnProperty("restoreUserSettings")||e.restoreUserSettings)&&x.restore(),M()})};j()},P=function(){var t=function(t,n,a,o,l){return new Promise(function(u,c){if("dash"!==o.streaming&&"hls"!==o.streaming&&"progressive"!==o.streaming)return void c(new A(1013));var p=r.addHtmlStructure(l,a,t,!0),h=new i,f=function(){var e=a.getElementsByClassName(d+l.prefix+"vc")[0].getElementsByTagName("video");if(e.length>0){var r,i=bitmovin.bitmse(e[0],v[n],t.get(),o.streaming,m.isMobile);"dash"===o.streaming?r=t.source().dash:"hls"===o.streaming?r=t.source().hls:"progressive"===o.streaming&&(r=t.source().progressive),r&&i.load(r),u({player:i,figure:p})}else c(new A(1004))};e.bitmovin&&e.bitmovin.bitmse&&r.isFunction(e.bitmovin.bitmse)?f():(h.loadCSS(w.css),h.loadScript(w.js).then(function(){f()},function(){c(new A(1012))})),t.cast().enable&&"free"!==s&&e.chrome&&!e.chrome.cast&&h.loadScript(w.cast)})},a=function(e,t,i,a,o){return new Promise(function(s,l){var u=e.getFlashVars(),c=i.getAttribute("id");if("dash"===a.streaming)u.src=e.source().dash,u.inputType=a.streaming;else{if("hls"!==a.streaming)return void l(new A(1013));u.src=e.source().hls,u.inputType=a.streaming}u.src=encodeURIComponent(u.src);var p=r.addHtmlStructure(o,i,e);u.apiCallback=t;var h={};h.allowfullscreen=!0,h.allowscriptaccess="always",h.wmode=e.tweaks().wmode,h.scale="exactfit",h.quality="high",h.bgcolor="#000000";var f={id:d+""+o.prefix+"video-"+c,name:d+""+o.prefix+"video-"+c},g=m.getMinimumFlashVersion();n.embedSWF(w.flash,f.id,"100%","100%",g,"http://files.dash-player.com/expressInstall.swf",u,h,f,function(e){if(e.success){var t=document[f.id];s({player:t,figure:p})}else l(new A(1005))})})},o=function(e,t){if(!e||Object.keys(e).length<1)return!t||t.length<1?[]:[t[0]];var n,r,i=[],a=-1;for(r=0;r<t.length;r++)switch(n=t[r],n.streaming){case"dash":e.hasOwnProperty("dash")&&e.dash&&(i.push(n),"html5"===n.player&&(a=i.length-1));break;case"hls":case"progressive":e.hasOwnProperty(n.streaming)&&e[n.streaming]&&i.push(n)}return a>-1&&m.isBrowserVersionIncompatibleForMSE()&&(n=i.splice(a,1),i.push(n[0])),i},l=function(e){var t=m.getTechSupportedByPlatform();if(!e||e.length<1)return t;var n,r,i,a,o=[];for(i=0;i<e.length;i++)for(n=e[i].split("."),a=0;a<t.length;a++)if(r=t[a],n[0]===r.player&&n[1]===r.streaming){o.push(r),t.splice(a,1);break}for(i=0;i<t.length;i++)o.push(t[i]);return o},u=function(e,t){var n=e.getPlayerPreference(),r=l(n),i=o(e.source(),r),a=[];if(t){for(var s=0;s<i.length;s++)if(i[s].player===t.player&&i[s].streaming===t.streaming){a=[],a.push(t);break}}else a=i;return a},c=function(e,r,i,o,s){return new Promise(function(l,c){var p=u(r,s);if(p.length>0){var d,h=p[0];switch(h.player){case"html5":case"native":d=t;break;case"flash":d=a;break;default:return void c(new A(1014))}d(r,i,o,h,e).then(function(e){l({bitdashPlayer:e.player,playerFigure:e.figure,technology:h})})["catch"](function(e){c(e)})}else{var f,g=n.getFlashPlayerVersion(),y=r.source(),v=y.hasOwnProperty("dash")&&y.dash||y.hasOwnProperty("mpd")&&y.mpd||y.hasOwnProperty("hls")&&y.hls||y.hasOwnProperty("progressive")&&y.progressive;if(v)if(s)f=new A(1015,s.player);else if(0===g.major||n.hasFlashPlayerVersion(m.getMinimumFlashVersion()))f=new A(1006);else{var b=g.major+"."+g.minor+"."+g.release;f=new A(1007,[b,m.getMinimumFlashVersion()])}else f=new A(1003);c(f)}})};return{getInstance:c,getSupportedTechSequence:l}},O=function(e,t){var n=new i,r="callinghome",a="https://",o=[a+r+"1.dash-player.com",a+r+"2.dash-player.com"],s=0,l=!t,u={"Content-type":"application/x-www-form-urlencoded"},c=function(){if(e.hasOwnProperty("getConfig")){var i,a=e.getConfig();a.hasOwnProperty("key")&&(i=a.key);var p={version:e.getVersion(),key:i,url:location.hostname,success:l};if(l?p.player=e.getVersion(!0):p.errorMessage=t,p="data="+encodeURIComponent(JSON.stringify(p)),!(s>=o.length)){var d=o[s]+"/"+r+"/"+r+".php";n.load(d,"POST",p,u)["catch"](function(){s++,c()})}}};c()},_=function(e){var t,n=function(e,t){var n;if("string"==typeof t)e.unshift(t);else if("length"in t&&t.length&&t.length>0)for(n=t.length-1;n>=0;n--)"string"==typeof t[n]&&e.unshift(t[n]);else console.debug("Incompatible default language definition, ignoring it.");return e},i=function(){var e=g.get("subtitleLang"),r=["off"],i=t.playback();i.hasOwnProperty("subtitleLanguage")&&i.subtitleLanguage&&(r=n(r,i.subtitleLanguage)),e&&r.unshift(e),f(r)},a=function(){var e=g.get("audioLang"),i=r.getSystemLanguageArray(),a=t.playback();a.hasOwnProperty("audioLanguage")&&a.audioLanguage&&(i=n(i,a.audioLanguage)),e&&i.unshift(e),h(i)},o=function(){var n=g.get("muted");void 0===n&&(n=t.playback().muted),n?e.mute():e.unmute()},s=function(){var n=g.get("volume");n?e.setVolume(n):e.setVolume(t.playback().volume)},l=function(){g.set("muted",e.isMuted())},u=function(){var t=e.getVolume();!isNaN(t)&&t>=0&&100>=t&&g.set("volume",t)},c=function(){var t=e.getAudio();t&&g.set("audioLang",t.lang)},p=function(){var t=e.getSubtitle();t&&g.set("subtitleLang",t.lang)},d=function(t,n,r){var i,a,o,s=!1;for(a=0;a<t.length;a++){for(o=0;o<n.length;o++)if(i=n[o],i&&t[a]===i.lang){e[r](i.id),s=!0;break}if(s)break}},h=function(t){d(t,e.getAvailableAudio(),"setAudio")},f=function(t){d(t,e.getAvailableSubtitles(),"setSubtitle")},m=function(){u(),l(),c(),p()},y=function(){e&&(s(),o(),a(),i())},v=function(e){t=e};return{saveMuted:l,saveVolume:u,saveAudio:c,saveSubtitle:p,save:m,restore:y,updateConfig:v}},N=!1,U=function(e){"file:"===location.protocol&&e&&!N&&(N=new A(1010),r.displaySetupError(N,e))},R=function(e){var t=void 0;if(e)if("*"===e){var n=[];for(var r in y)y.hasOwnProperty(r)&&n.push(y[r]);t=n}else{var i=document.getElementById(e);U(i),i&&(y.hasOwnProperty(e)||(y[e]=new C(i,e,{visibility:"visible",prefix:""}),N&&(y[e].setup=function(){return console.error(N),y[e]})),t=y[e])}else t=v;return t},B=function(e,t,n){"enterprise"!==s&&console.log("%c"+e,"color:"+t+";font-weight:bold;font-size:"+n+"px;")},I=function(){B("www.bitmovin.net","black","28"),B("bitmovin media streaming - we make your videos flow","blue","14"),B("Industry Leading Streaming Solutions and Server Encoding Systems","blue","14"),B("(c) 2015 bitmovin GmbH. All rights reserved","blue","14")};I(),"function"==typeof define&&define.amd?define([],function(){return R}):"function"==typeof require&&"object"==typeof exports&&"object"==typeof module&&(module.exports?module.exports=R:exports=R),e.bitdash=R,e.bitdash.expireWarning=function(){alert("Thank you for using bitdash! \nThis version of the player has expired. Please contact our sales team: sales@bitmovin.net")},R.EVENTS=L}(this);