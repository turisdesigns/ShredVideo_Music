/****************************************************************************
 * Copyright (C) 2015, bitmovin GmbH, All Rights Reserved
 *
 * Authors:
 *     Daniel Weinberger <daniel.weinberger@bitmovin.net>
 *     Reinhard Grandl <reinhard.grandl@bitmovin.net>
 *
 * This source code and its use and distribution, is subject to the terms
 * and conditions of the applicable license agreement.
 *
 * bitdash version 3.3.0
 *
 ****************************************************************************/
!function(a){(function(){"use strict";function b(a){return"function"==typeof a||"object"==typeof a&&null!==a}function c(a){return"function"==typeof a}function d(a){return"object"==typeof a&&null!==a}function e(a){Q=a}function f(a){U=a}function g(){var a=process.nextTick,b=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(b)&&"0"===b[1]&&"10"===b[2]&&(a=setImmediate),function(){a(l)}}function h(){return function(){P(l)}}function i(){var a=0,b=new X(l),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function j(){var a=new MessageChannel;return a.port1.onmessage=l,function(){a.port2.postMessage(0)}}function k(){return function(){setTimeout(l,1)}}function l(){for(var a=0;T>a;a+=2){var b=$[a],c=$[a+1];b(c),$[a]=void 0,$[a+1]=void 0}T=0}function m(){try{var a=require,b=a("vertx");return P=b.runOnLoop||b.runOnContext,h()}catch(c){return k()}}function n(){}function o(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function q(a){try{return a.then}catch(b){return ca.error=b,ca}}function r(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function s(a,b,c){U(function(a){var d=!1,e=r(c,b,function(c){d||(d=!0,b!==c?v(a,c):x(a,c))},function(b){d||(d=!0,y(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,y(a,e))},a)}function t(a,b){b._state===aa?x(a,b._result):b._state===ba?y(a,b._result):z(b,void 0,function(b){v(a,b)},function(b){y(a,b)})}function u(a,b){if(b.constructor===a.constructor)t(a,b);else{var d=q(b);d===ca?y(a,ca.error):void 0===d?x(a,b):c(d)?s(a,b,d):x(a,b)}}function v(a,c){a===c?y(a,o()):b(c)?u(a,c):x(a,c)}function w(a){a._onerror&&a._onerror(a._result),A(a)}function x(a,b){a._state===_&&(a._result=b,a._state=aa,0!==a._subscribers.length&&U(A,a))}function y(a,b){a._state===_&&(a._state=ba,a._result=b,U(w,a))}function z(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+aa]=c,e[f+ba]=d,0===f&&a._state&&U(A,a)}function A(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?D(c,d,e,f):e(f);a._subscribers.length=0}}function B(){this.error=null}function C(a,b){try{return a(b)}catch(c){return da.error=c,da}}function D(a,b,d,e){var f,g,h,i,j=c(d);if(j){if(f=C(d,e),f===da?(i=!0,g=f.error,f=null):h=!0,b===f)return void y(b,p())}else f=e,h=!0;b._state!==_||(j&&h?v(b,f):i?y(b,g):a===aa?x(b,f):a===ba&&y(b,f))}function E(a,b){try{b(function(b){v(a,b)},function(b){y(a,b)})}catch(c){y(a,c)}}function F(a,b){var c=this;c._instanceConstructor=a,c.promise=new a(n),c._validateInput(b)?(c._input=b,c.length=b.length,c._remaining=b.length,c._init(),0===c.length?x(c.promise,c._result):(c.length=c.length||0,c._enumerate(),0===c._remaining&&x(c.promise,c._result))):y(c.promise,c._validationError())}function G(a){return new ea(this,a).promise}function H(a){function b(a){v(e,a)}function c(a){y(e,a)}var d=this,e=new d(n);if(!S(a))return y(e,new TypeError("You must pass an array to race.")),e;for(var f=a.length,g=0;e._state===_&&f>g;g++)z(d.resolve(a[g]),void 0,b,c);return e}function I(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b)return a;var c=new b(n);return v(c,a),c}function J(a){var b=this,c=new b(n);return y(c,a),c}function K(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function L(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function M(a){this._id=ja++,this._state=void 0,this._result=void 0,this._subscribers=[],n!==a&&(c(a)||K(),this instanceof M||L(),E(this,a))}function N(){var b;if("undefined"!=typeof a)b=a;else if("undefined"!=typeof self)b=self;else try{b=Function("return this")()}catch(c){throw new Error("polyfill failed because global object is unavailable in this environment")}var d=b.Promise;(!d||"[object Promise]"!==Object.prototype.toString.call(d.resolve())||d.cast)&&(b.Promise=ka)}var O;O=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var P,Q,R,S=O,T=0,U=({}.toString,function(a,b){$[T]=a,$[T+1]=b,T+=2,2===T&&(Q?Q(l):R())}),V="undefined"!=typeof window?window:void 0,W=V||{},X=W.MutationObserver||W.WebKitMutationObserver,Y="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,$=new Array(1e3);R=Y?g():X?i():Z?j():void 0===V&&"function"==typeof require?m():k();var _=void 0,aa=1,ba=2,ca=new B,da=new B;F.prototype._validateInput=function(a){return S(a)},F.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},F.prototype._init=function(){this._result=new Array(this.length)};var ea=F;F.prototype._enumerate=function(){for(var a=this,b=a.length,c=a.promise,d=a._input,e=0;c._state===_&&b>e;e++)a._eachEntry(d[e],e)},F.prototype._eachEntry=function(a,b){var c=this,e=c._instanceConstructor;d(a)?a.constructor===e&&a._state!==_?(a._onerror=null,c._settledAt(a._state,b,a._result)):c._willSettleAt(e.resolve(a),b):(c._remaining--,c._result[b]=a)},F.prototype._settledAt=function(a,b,c){var d=this,e=d.promise;e._state===_&&(d._remaining--,a===ba?y(e,c):d._result[b]=c),0===d._remaining&&x(e,d._result)},F.prototype._willSettleAt=function(a,b){var c=this;z(a,void 0,function(a){c._settledAt(aa,b,a)},function(a){c._settledAt(ba,b,a)})};var fa=G,ga=H,ha=I,ia=J,ja=0,ka=M;M.all=fa,M.race=ga,M.resolve=ha,M.reject=ia,M._setScheduler=e,M._setAsap=f,M._asap=U,M.prototype={constructor:M,then:function(a,b){var c=this,d=c._state;if(d===aa&&!a||d===ba&&!b)return this;var e=new this.constructor(n),f=c._result;if(d){var g=arguments[d-1];U(function(){D(d,e,g,f)})}else z(c,e,a,b);return e},"catch":function(a){return this.then(null,a)}};var la=N;window&&window.Promise&&"function"==typeof window.Promise||la()}).call(this);var b=function(){"use strict";function a(a,h,i){var j=0,k=[0],l="",m=null,l=i||"UTF8";if("UTF8"!==l&&"UTF16"!==l)throw"encoding must be UTF8 or UTF16";if("HEX"===h){if(0!==a.length%2)throw"srcString of HEX type must be in byte increments";m=c(a),j=m.binLen,k=m.value}else if("ASCII"===h||"TEXT"===h)m=b(a,l),j=m.binLen,k=m.value;else{if("B64"!==h)throw"inputFormat must be HEX, TEXT, ASCII, or B64";m=d(a),j=m.binLen,k=m.value}this.getHash=function(a,b,c,d){var h,i=null,l=k.slice(),m=j;if(3===arguments.length?"number"!=typeof c&&(d=c,c=1):2===arguments.length&&(c=1),c!==parseInt(c,10)||1>c)throw"numRounds must a integer >= 1";switch(b){case"HEX":i=e;break;case"B64":i=f;break;default:throw"format must be HEX or B64"}if("SHA-224"===a)for(h=0;c>h;h++)l=r(l,m,a),m=224;else{if("SHA-256"!==a)throw"Chosen SHA variant is not supported";for(h=0;c>h;h++)l=r(l,m,a),m=256}return i(l,g(d))},this.getHMAC=function(a,h,i,m,n){var o,p,q,s,t=[],u=[];switch(o=null,m){case"HEX":m=e;break;case"B64":m=f;break;default:throw"outputFormat must be HEX or B64"}if("SHA-224"===i)p=64,s=224;else{if("SHA-256"!==i)throw"Chosen SHA variant is not supported";p=64,s=256}if("HEX"===h)o=c(a),q=o.binLen,o=o.value;else if("ASCII"===h||"TEXT"===h)o=b(a,l),q=o.binLen,o=o.value;else{if("B64"!==h)throw"inputFormat must be HEX, TEXT, ASCII, or B64";o=d(a),q=o.binLen,o=o.value}for(a=8*p,h=p/4-1,q/8>p?(o=r(o,q,i),o[h]&=4294967040):p>q/8&&(o[h]&=4294967040),p=0;h>=p;p+=1)t[p]=909522486^o[p],u[p]=1549556828^o[p];return i=r(u.concat(r(t.concat(k),a+j,i)),a+s,i),m(i,g(n))}}function b(a,b){var c,d,e=[],f=[],g=0;if("UTF8"===b)for(d=0;d<a.length;d+=1)for(c=a.charCodeAt(d),f=[],c>2048?(f[0]=224|(61440&c)>>>12,f[1]=128|(4032&c)>>>6,f[2]=128|63&c):c>128?(f[0]=192|(1984&c)>>>6,f[1]=128|63&c):f[0]=c,c=0;c<f.length;c+=1)e[g>>>2]|=f[c]<<24-g%4*8,g+=1;else if("UTF16"===b)for(d=0;d<a.length;d+=1)e[g>>>2]|=a.charCodeAt(d)<<16-g%4*8,g+=2;return{value:e,binLen:8*g}}function c(a){var b,c,d=[],e=a.length;if(0!==e%2)throw"String of HEX type must be in byte increments";for(b=0;e>b;b+=2){if(c=parseInt(a.substr(b,2),16),isNaN(c))throw"String of HEX type contains invalid characters";d[b>>>3]|=c<<24-b%8*4}return{value:d,binLen:4*e}}function d(a){var b,c,d,e,f,g=[],h=0;if(-1===a.search(/^[a-zA-Z0-9=+\/]+$/))throw"Invalid character in base-64 string";if(b=a.indexOf("="),a=a.replace(/\=/g,""),-1!==b&&b<a.length)throw"Invalid '=' found in base-64 string";for(c=0;c<a.length;c+=4){for(f=a.substr(c,4),d=e=0;d<f.length;d+=1)b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(f[d]),e|=b<<18-6*d;for(d=0;d<f.length-1;d+=1)g[h>>2]|=(e>>>16-8*d&255)<<24-h%4*8,h+=1}return{value:g,binLen:8*h}}function e(a,b){var c,d,e="",f=4*a.length;for(c=0;f>c;c+=1)d=a[c>>>2]>>>8*(3-c%4),e+="0123456789abcdef".charAt(d>>>4&15)+"0123456789abcdef".charAt(15&d);return b.outputUpper?e.toUpperCase():e}function f(a,b){var c,d,e,f="",g=4*a.length;for(c=0;g>c;c+=3)for(e=(a[c>>>2]>>>8*(3-c%4)&255)<<16|(a[c+1>>>2]>>>8*(3-(c+1)%4)&255)<<8|a[c+2>>>2]>>>8*(3-(c+2)%4)&255,d=0;4>d;d+=1)f=8*c+6*d<=32*a.length?f+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>>6*(3-d)&63):f+b.b64Pad;return f}function g(a){var b={outputUpper:!1,b64Pad:"="};try{a.hasOwnProperty("outputUpper")&&(b.outputUpper=a.outputUpper),a.hasOwnProperty("b64Pad")&&(b.b64Pad=a.b64Pad)}catch(c){}if("boolean"!=typeof b.outputUpper)throw"Invalid outputUpper formatting option";if("string"!=typeof b.b64Pad)throw"Invalid b64Pad formatting option";return b}function h(a,b){return a>>>b|a<<32-b}function i(a,b,c){return a&b^~a&c}function j(a,b,c){return a&b^a&c^b&c}function k(a){return h(a,2)^h(a,13)^h(a,22)}function l(a){return h(a,6)^h(a,11)^h(a,25)}function m(a){return h(a,7)^h(a,18)^a>>>3}function n(a){return h(a,17)^h(a,19)^a>>>10}function o(a,b){var c=(65535&a)+(65535&b);return((a>>>16)+(b>>>16)+(c>>>16)&65535)<<16|65535&c}function p(a,b,c,d){var e=(65535&a)+(65535&b)+(65535&c)+(65535&d);return((a>>>16)+(b>>>16)+(c>>>16)+(d>>>16)+(e>>>16)&65535)<<16|65535&e}function q(a,b,c,d,e){var f=(65535&a)+(65535&b)+(65535&c)+(65535&d)+(65535&e);return((a>>>16)+(b>>>16)+(c>>>16)+(d>>>16)+(e>>>16)+(f>>>16)&65535)<<16|65535&f}function r(a,b,c){var d,e,f,g,h,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M=[],N=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];if(v=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],d=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],"SHA-224"!==c&&"SHA-256"!==c)throw"Unexpected error in SHA-2 implementation";for(w=64,z=16,A=1,K=Number,B=o,C=p,D=q,E=m,F=n,G=k,H=l,J=j,I=i,v="SHA-224"===c?v:d,a[b>>>5]|=128<<24-b%32,a[(b+65>>>9<<4)+15]=b,L=a.length,x=0;L>x;x+=z){for(b=v[0],d=v[1],e=v[2],f=v[3],g=v[4],h=v[5],r=v[6],s=v[7],y=0;w>y;y+=1)M[y]=16>y?new K(a[y*A+x],a[y*A+x+1]):C(F(M[y-2]),M[y-7],E(M[y-15]),M[y-16]),t=D(s,H(g),I(g,h,r),N[y],M[y]),u=B(G(b),J(b,d,e)),s=r,r=h,h=g,g=B(f,t),f=e,e=d,d=b,b=B(t,u);v[0]=B(b,v[0]),v[1]=B(d,v[1]),v[2]=B(e,v[2]),v[3]=B(f,v[3]),v[4]=B(g,v[4]),v[5]=B(h,v[5]),v[6]=B(r,v[6]),v[7]=B(s,v[7])}if("SHA-224"===c)a=[v[0],v[1],v[2],v[3],v[4],v[5],v[6]];else{if("SHA-256"!==c)throw"Unexpected error in SHA-2 implementation";a=v}return a}return a}(),c=function(){function b(){if(!T){try{var a=M.getElementsByTagName("body")[0].appendChild(s("span"));a.parentNode.removeChild(a)}catch(b){return}T=!0;for(var c=P.length,d=0;c>d;d++)P[d]()}}function d(a){T?a():P[P.length]=a}function e(a){if(typeof L.addEventListener!=E)L.addEventListener("load",a,!1);else if(typeof M.addEventListener!=E)M.addEventListener("load",a,!1);else if(typeof L.attachEvent!=E)t(L,"onload",a);else if("function"==typeof L.onload){var b=L.onload;L.onload=function(){b(),a()}}else L.onload=a}function f(){O?g():h()}function g(){var a=M.getElementsByTagName("body")[0],b=s(F);b.setAttribute("type",I);var c=a.appendChild(b);if(c){var d=0;!function(){if(typeof c.GetVariable!=E){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),W.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d)return d++,void setTimeout(arguments.callee,10);a.removeChild(b),c=null,h()}()}else h()}function h(){var a=Q.length;if(a>0)for(var b=0;a>b;b++){var c=Q[b].id,d=Q[b].callbackFn,e={success:!1,id:c};if(W.pv[0]>0){var f=r(c);if(f)if(!u(Q[b].swfVersion)||W.wk&&W.wk<312)if(Q[b].expressInstall&&j()){var g={};g.data=Q[b].expressInstall,g.width=f.getAttribute("width")||"0",g.height=f.getAttribute("height")||"0",f.getAttribute("class")&&(g.styleclass=f.getAttribute("class")),f.getAttribute("align")&&(g.align=f.getAttribute("align"));for(var h={},m=f.getElementsByTagName("param"),n=m.length,o=0;n>o;o++)"movie"!=m[o].getAttribute("name").toLowerCase()&&(h[m[o].getAttribute("name")]=m[o].getAttribute("value"));k(g,h,c,d)}else l(f),d&&d(e);else w(c,!0),d&&(e.success=!0,e.ref=i(c),d(e))}else if(w(c,!0),d){var p=i(c);p&&typeof p.SetVariable!=E&&(e.success=!0,e.ref=p),d(e)}}}function i(a){var b=null,c=r(a);if(c&&"OBJECT"==c.nodeName)if(typeof c.SetVariable!=E)b=c;else{var d=c.getElementsByTagName(F)[0];d&&(b=d)}return b}function j(){return!U&&u("6.0.65")&&(W.win||W.mac)&&!(W.wk&&W.wk<312)}function k(a,b,c,d){U=!0,A=d||null,B={success:!1,id:c};var e=r(c);if(e){"OBJECT"==e.nodeName?(y=m(e),z=null):(y=e,z=c),a.id=J,(typeof a.width==E||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==E||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),M.title=M.title.slice(0,47)+" - Flash Player Installation";var f=W.ie&&W.win?"ActiveX":"PlugIn",g="MMredirectURL="+L.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+M.title;if(typeof b.flashvars!=E?b.flashvars+="&"+g:b.flashvars=g,W.ie&&W.win&&4!=e.readyState){var h=s("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}n(a,b,c)}}function l(a){if(W.ie&&W.win&&4!=a.readyState){var b=s("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(m(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(m(a),a)}function m(a){var b=s("div");if(W.win&&W.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(F)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function n(a,b,c){var d,e=r(c);if(W.wk&&W.wk<312)return d;if(e)if(typeof a.id==E&&(a.id=c),W.ie&&W.win){var f="";for(var g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));var h="";for(var i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",R[R.length]=a.id,d=r(a.id)}else{var j=s(F);j.setAttribute("type",I);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?j.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&j.setAttribute(k,a[k]));for(var l in b)b[l]!=Object.prototype[l]&&"movie"!=l.toLowerCase()&&o(j,l,b[l]);e.parentNode.replaceChild(j,e),d=j}return d}function o(a,b,c){var d=s("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function p(a){var b=r(a);b&&"OBJECT"==b.nodeName&&(W.ie&&W.win?(b.style.display="none",function(){4==b.readyState?q(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function q(a){var b=r(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function r(a){var b=null;try{b=M.getElementById(a)}catch(c){}return b}function s(a){return M.createElement(a)}function t(a,b,c){a.attachEvent(b,c),S[S.length]=[a,b,c]}function u(a){var b=W.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function v(a,b,c,d){if(!W.ie||!W.mac){var e=M.getElementsByTagName("head")[0];if(e){var f=c&&"string"==typeof c?c:"screen";if(d&&(C=null,D=null),!C||D!=f){var g=s("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),C=e.appendChild(g),W.ie&&W.win&&typeof M.styleSheets!=E&&M.styleSheets.length>0&&(C=M.styleSheets[M.styleSheets.length-1]),D=f}W.ie&&W.win?C&&typeof C.addRule==F&&C.addRule(a,b):C&&typeof M.createTextNode!=E&&C.appendChild(M.createTextNode(a+" {"+b+"}"))}}}function w(a,b){if(V){var c=b?"visible":"hidden";T&&r(a)?r(a).style.visibility=c:v("#"+a,"visibility:"+c)}}function x(a){var b=/[\\\'<>\.;]/,c=null!=b.exec(a);return c&&typeof encodeURIComponent!=E?encodeURIComponent(a):a}var y,z,A,B,C,D,E="undefined",F="object",G="Shockwave Flash",H="ShockwaveFlash.ShockwaveFlash",I="application/x-shockwave-flash",J="SWFObjectExprInst",K="onreadystatechange",L=a,M=document,N=navigator,O=!1,P=[f],Q=[],R=[],S=[],T=!1,U=!1,V=!0,W=function(){var a=typeof M.getElementById!=E&&typeof M.getElementsByTagName!=E&&typeof M.createElement!=E,b=N.userAgent.toLowerCase(),c=N.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),e=c?/mac/.test(c):/mac/.test(b),f=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!1,h=[0,0,0],i=null;if(typeof N.plugins!=E&&typeof N.plugins[G]==F)i=N.plugins[G].description,!i||typeof N.mimeTypes!=E&&N.mimeTypes[I]&&!N.mimeTypes[I].enabledPlugin||(O=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),h[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof L.ActiveXObject!=E)try{var j=new ActiveXObject(H);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();(function(){W.w3&&((typeof M.readyState!=E&&"complete"==M.readyState||typeof M.readyState==E&&(M.getElementsByTagName("body")[0]||M.body))&&b(),T||(typeof M.addEventListener!=E&&M.addEventListener("DOMContentLoaded",b,!1),W.ie&&W.win&&(M.attachEvent(K,function(){"complete"==M.readyState&&(M.detachEvent(K,arguments.callee),b())}),L==top&&!function(){if(!T){try{M.documentElement.doScroll("left")}catch(a){return void setTimeout(arguments.callee,0)}b()}}()),W.wk&&!function(){return T?void 0:/loaded|complete/.test(M.readyState)?void b():void setTimeout(arguments.callee,0)}(),e(b)))})(),function(){W.ie&&W.win&&a.attachEvent("onunload",function(){for(var a=S.length,b=0;a>b;b++)S[b][0].detachEvent(S[b][1],S[b][2]);for(var d=R.length,e=0;d>e;e++)p(R[e]);for(var f in W)W[f]=null;W=null;for(var g in c)c[g]=null;c=null})}();return{registerObject:function(a,b,c,d){if(W.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,Q[Q.length]=e,w(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return W.w3?i(a):void 0},embedSWF:function(a,b,c,e,f,g,h,i,l,m){var o={success:!1,id:b};W.w3&&!(W.wk&&W.wk<312)&&a&&b&&c&&e&&f?(w(b,!1),d(function(){c+="",e+="";var d={};if(l&&typeof l===F)for(var p in l)d[p]=l[p];d.data=a,d.width=c,d.height=e;var q={};if(i&&typeof i===F)for(var r in i)q[r]=i[r];if(h&&typeof h===F)for(var s in h)typeof q.flashvars!=E?q.flashvars+="&"+s+"="+h[s]:q.flashvars=s+"="+h[s];if(u(f)){var t=n(d,q,b);d.id==b&&w(b,!0),o.success=!0,o.ref=t}else{if(g&&j())return d.data=g,void k(d,q,b,m);w(b,!0)}m&&m(o)})):m&&m(o)},switchOffAutoHideShow:function(){V=!1},ua:W,getFlashPlayerVersion:function(){return{major:W.pv[0],minor:W.pv[1],release:W.pv[2]}},hasFlashPlayerVersion:u,createSWF:function(a,b,c){return W.w3?n(a,b,c):void 0},showExpressInstall:function(a,b,c,d){W.w3&&j()&&k(a,b,c,d)},removeSWF:function(a){W.w3&&p(a)},createCSS:function(a,b,c,d){W.w3&&v(a,b,c,d)},addDomLoadEvent:d,addLoadEvent:e,getQueryParamValue:function(a){var b=M.location.search||M.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return x(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return x(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(U){var a=r(J);a&&y&&(a.parentNode.replaceChild(y,a),z&&(w(z,!0),W.ie&&W.win&&(y.style.display="block")),A&&A(B)),U=!1}}}}(),d=(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];c.apply(this,f)}else if(g(c)){for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];for(j=c.slice(),d=j.length,i=0;d>i;i++)j[i].apply(this,f)}return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned){var c;c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(0>d)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?e(a._events[b])?1:a._events[b].length:0}},{}],2:[function(a,b,c){var d;d=function(){function a(){this.id=null,this.errorURLTemplates=[],this.impressionURLTemplates=[],this.creatives=[]}return a}(),b.exports=d},{}],3:[function(a,b,c){var d,e,f;e=a("./parser"),f=a("./util"),d=function(){function a(){}return a.cappingFreeLunch=0,a.cappingMinimumTimeInterval=0,a.options={withCredentials:!1,timeout:0},a.get=function(a,b,d){var f,g,h;return g=+new Date,f=c.extend=function(a,b){var c,d;for(c in b)d=b[c],a[c]=d;return a},d||("function"==typeof b&&(d=b),h={}),h=f(this.options,b),this.totalCallsTimeout<g?(this.totalCalls=1,this.totalCallsTimeout=g+36e5):this.totalCalls++,this.cappingFreeLunch>=this.totalCalls?void d(null):g-this.lastSuccessfullAd<this.cappingMinimumTimeInterval?void d(null):e.parse(a,h,function(a){return function(a){return d(a)}}(this))},function(){var b,c;c=f.storage,b=Object.defineProperty,["lastSuccessfullAd","totalCalls","totalCallsTimeout"].forEach(function(d){b(a,d,{get:function(){return c.getItem(d)},set:function(a){return c.setItem(d,a)},configurable:!1,enumerable:!0})}),null==a.totalCalls&&(a.totalCalls=0),null==a.totalCallsTimeout&&(a.totalCallsTimeout=0)}(),a}(),b.exports=d},{"./parser":8,"./util":14}],4:[function(a,b,c){var d;d=function(){function a(){this.id=null,this.width=0,this.height=0,this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.companionClickThroughURLTemplate=null,this.trackingEvents={}}return a}(),b.exports=d},{}],5:[function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=function(){function a(){this.trackingEvents={}}return a}(),f=function(a){function b(){b.__super__.constructor.apply(this,arguments),this.type="linear",this.duration=0,this.skipDelay=null,this.mediaFiles=[],this.videoClickThroughURLTemplate=null,this.videoClickTrackingURLTemplates=[],this.videoCustomClickURLTemplates=[],this.adParameters=null}return i(b,a),b}(d),g=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b}(d),e=function(a){function b(){this.type="companion",this.variations=[],this.videoClickTrackingURLTemplates=[]}return i(b,a),b}(d),b.exports={VASTCreativeLinear:f,VASTCreativeNonLinear:g,VASTCreativeCompanion:e}},{}],6:[function(a,b,c){b.exports={client:a("./client"),tracker:a("./tracker"),parser:a("./parser"),util:a("./util")}},{"./client":3,"./parser":8,"./tracker":10,"./util":14}],7:[function(a,b,c){var d;d=function(){function a(){this.id=null,this.fileURL=null,this.deliveryType="progressive",this.mimeType=null,this.codec=null,this.bitrate=0,this.minBitrate=0,this.maxBitrate=0,this.width=0,this.height=0,this.apiFramework=null,this.scalable=null,this.maintainAspectRatio=null}return a}(),b.exports=d},{}],8:[function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};e=a("./urlhandler"),l=a("./response"),f=a("./ad"),m=a("./util"),i=a("./creative").VASTCreativeLinear,h=a("./creative").VASTCreativeCompanion,j=a("./mediafile"),g=a("./companionad"),d=a("events").EventEmitter,k=function(){function a(){}var b;return b=[],a.addURLTemplateFilter=function(a){"function"==typeof a&&b.push(a)},a.removeURLTemplateFilter=function(){return b.pop()},a.countURLTemplateFilters=function(){return b.length},a.clearUrlTemplateFilters=function(){return b=[]},a.parse=function(a,b,c){return c||("function"==typeof b&&(c=b),b={}),this._parse(a,null,b,function(a,b){return c(b)})},a.vent=new d,a.track=function(a,b){return this.vent.emit("VAST-error",b),m.track(a,b)},a.on=function(a,b){return this.vent.on(a,b)},a.once=function(a,b){return this.vent.once(a,b)},a._parse=function(a,c,d,f){var g,h,i;for(f||("function"==typeof d&&(f=d),d={}),h=0,i=b.length;i>h;h++)g=b[h],a=g(a);return null==c&&(c=[]),c.push(a),e.get(a,d,function(b){return function(e,g){var h,i,j,k,m,o,p,q,r,s,t;if(null!=e)return f(e);if(m=new l,null==(null!=g?g.documentElement:void 0)||"VAST"!==g.documentElement.nodeName)return f();for(s=g.documentElement.childNodes,o=0,q=s.length;q>o;o++)k=s[o],"Error"===k.nodeName&&m.errorURLTemplates.push(b.parseNodeText(k));for(t=g.documentElement.childNodes,p=0,r=t.length;r>p;p++)k=t[p],"Ad"===k.nodeName&&(h=b.parseAdElement(k),null!=h?m.ads.push(h):b.track(m.errorURLTemplates,{ERRORCODE:101}));for(i=function(a){var c,d,e;if(null==a&&(a=!1),m){for(e=m.ads,c=0,d=e.length;d>c;c++)if(h=e[c],null!=h.nextWrapperURL)return;return 0===m.ads.length&&(a||b.track(m.errorURLTemplates,{ERRORCODE:303}),m=null),f(null,m)}},j=m.ads.length;j--;)h=m.ads[j],null!=h.nextWrapperURL&&!function(e){var f,g,h;return c.length>=10||(h=e.nextWrapperURL,n.call(c,h)>=0)?(b.track(e.errorURLTemplates,{ERRORCODE:302}),m.ads.splice(m.ads.indexOf(e),1),void i()):(0===e.nextWrapperURL.indexOf("//")?(g=location.protocol,e.nextWrapperURL=""+g+e.nextWrapperURL):-1===e.nextWrapperURL.indexOf("://")&&(f=a.slice(0,a.lastIndexOf("/")),e.nextWrapperURL=""+f+"/"+e.nextWrapperURL),b._parse(e.nextWrapperURL,c,d,function(a,c){var d,f,g,h,j,k,l,n,o,p,q,r,s,t,u,v,w,x;if(f=!1,null!=a)b.track(e.errorURLTemplates,{ERRORCODE:301}),m.ads.splice(m.ads.indexOf(e),1),f=!0;else if(null==c)b.track(e.errorURLTemplates,{ERRORCODE:303}),m.ads.splice(m.ads.indexOf(e),1),f=!0;else for(m.errorURLTemplates=m.errorURLTemplates.concat(c.errorURLTemplates),h=m.ads.indexOf(e),m.ads.splice(h,1),u=c.ads,l=0,n=u.length;n>l;l++){if(j=u[l],j.errorURLTemplates=e.errorURLTemplates.concat(j.errorURLTemplates),j.impressionURLTemplates=e.impressionURLTemplates.concat(j.impressionURLTemplates),null!=e.trackingEvents)for(v=j.creatives,r=0,o=v.length;o>r;r++)if(d=v[r],"linear"===d.type)for(w=Object.keys(e.trackingEvents),s=0,p=w.length;p>s;s++)g=w[s],(k=d.trackingEvents)[g]||(k[g]=[]),d.trackingEvents[g]=d.trackingEvents[g].concat(e.trackingEvents[g]);if(null!=e.videoClickTrackingURLTemplates)for(x=j.creatives,t=0,q=x.length;q>t;t++)d=x[t],"linear"===d.type&&(d.videoClickTrackingURLTemplates=d.videoClickTrackingURLTemplates.concat(e.videoClickTrackingURLTemplates));m.ads.splice(h,0,j)}return delete e.nextWrapperURL,i(f)}))}(h);return i()}}(this))},a.childByName=function(a,b){var c,d,e,f;for(f=a.childNodes,d=0,e=f.length;e>d;d++)if(c=f[d],c.nodeName===b)return c},a.childsByName=function(a,b){var c,d,e,f,g;for(d=[],g=a.childNodes,e=0,f=g.length;f>e;e++)c=g[e],c.nodeName===b&&d.push(c);return d},a.parseAdElement=function(a){var b,c,d,e;for(e=a.childNodes,c=0,d=e.length;d>c;c++){if(b=e[c],b.id=a.getAttribute("id"),"Wrapper"===b.nodeName)return this.parseWrapperElement(b);if("InLine"===b.nodeName)return this.parseInLineElement(b)}},a.parseWrapperElement=function(a){var b,c,d,e,f,g,h;for(b=this.parseInLineElement(a),e=this.childByName(a,"VASTAdTagURI"),null!=e?b.nextWrapperURL=this.parseNodeText(e):(e=this.childByName(a,"VASTAdTagURL"),null!=e&&(b.nextWrapperURL=this.parseNodeText(this.childByName(e,"URL")))),
d=null,h=b.creatives,f=0,g=h.length;g>f;f++)if(c=h[f],"linear"===c.type){d=c;break}return null!=d&&(null!=d.trackingEvents&&(b.trackingEvents=d.trackingEvents),null!=d.videoClickTrackingURLTemplates&&(b.videoClickTrackingURLTemplates=d.videoClickTrackingURLTemplates)),null!=b.nextWrapperURL?b:void 0},a.parseInLineElement=function(a){var b,c,d,e,g,h,i,j,k,l,m,n,o,p;for(b=new f,b.id=a.id,n=a.childNodes,h=0,k=n.length;k>h;h++)switch(g=n[h],g.nodeName){case"Error":this.isUrl(g)&&b.errorURLTemplates.push(this.parseNodeText(g));break;case"Impression":this.isUrl(g)&&b.impressionURLTemplates.push(this.parseNodeText(g));break;case"Creatives":for(o=this.childsByName(g,"Creative"),i=0,l=o.length;l>i;i++)for(d=o[i],p=d.childNodes,j=0,m=p.length;m>j;j++)switch(e=p[j],e.nodeName){case"Linear":c=this.parseCreativeLinearElement(e),c&&b.creatives.push(c);break;case"CompanionAds":c=this.parseCompanionAd(e),c&&b.creatives.push(c)}}return b},a.parseCreativeLinearElement=function(a){var b,c,d,e,f,g,h,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M;if(d=new i,d.duration=this.parseDuration(this.parseNodeText(this.childByName(a,"Duration"))),-1===d.duration&&"Wrapper"!==a.parentNode.parentNode.parentNode.nodeName)return null;if(p=a.getAttribute("skipoffset"),null==p?d.skipDelay=null:"%"===p.charAt(p.length-1)?(n=parseInt(p,10),d.skipDelay=d.duration*(n/100)):d.skipDelay=this.parseDuration(p),t=this.childByName(a,"VideoClicks"),null!=t){for(d.videoClickThroughURLTemplate=this.parseNodeText(this.childByName(t,"ClickThrough")),H=this.childsByName(t,"ClickTracking"),v=0,z=H.length;z>v;v++)c=H[v],d.videoClickTrackingURLTemplates.push(this.parseNodeText(c));for(I=this.childsByName(t,"CustomClick"),w=0,A=I.length;A>w;w++)e=I[w],d.videoCustomClickURLTemplates.push(this.parseNodeText(e))}for(b=this.childByName(a,"AdParameters"),null!=b&&(d.adParameters=this.parseNodeText(b)),J=this.childsByName(a,"TrackingEvents"),x=0,B=J.length;B>x;x++)for(r=J[x],K=this.childsByName(r,"Tracking"),y=0,C=K.length;C>y;y++)if(q=K[y],f=q.getAttribute("event"),s=this.parseNodeText(q),null!=f&&null!=s){if("progress"===f){if(m=q.getAttribute("offset"),!m)continue;f="%"===m.charAt(m.length-1)?"progress-"+m:"progress-"+Math.round(this.parseDuration(m))}null==(u=d.trackingEvents)[f]&&(u[f]=[]),d.trackingEvents[f].push(s)}for(L=this.childsByName(a,"MediaFiles"),F=0,D=L.length;D>F;F++)for(l=L[F],M=this.childsByName(l,"MediaFile"),G=0,E=M.length;E>G;G++)k=M[G],h=new j,h.id=k.getAttribute("id"),h.fileURL=this.parseNodeText(k),h.deliveryType=k.getAttribute("delivery"),h.codec=k.getAttribute("codec"),h.mimeType=k.getAttribute("type"),h.apiFramework=k.getAttribute("apiFramework"),h.bitrate=parseInt(k.getAttribute("bitrate")||0),h.minBitrate=parseInt(k.getAttribute("minBitrate")||0),h.maxBitrate=parseInt(k.getAttribute("maxBitrate")||0),h.width=parseInt(k.getAttribute("width")||0),h.height=parseInt(k.getAttribute("height")||0),o=k.getAttribute("scalable"),o&&"string"==typeof o&&(o=o.toLowerCase(),"true"===o?h.scalable=!0:"false"===o&&(h.scalable=!1)),g=k.getAttribute("maintainAspectRatio"),g&&"string"==typeof g&&(g=g.toLowerCase(),"true"===g?h.maintainAspectRatio=!0:"false"===g&&(h.maintainAspectRatio=!1)),d.mediaFiles.push(h);return d},a.parseCompanionAd=function(a){var b,c,d,e,f,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F;for(d=new h,A=this.childsByName(a,"Companion"),o=0,s=A.length;s>o;o++){for(c=A[o],b=new g,b.id=c.getAttribute("id")||null,b.width=c.getAttribute("width"),b.height=c.getAttribute("height"),B=this.childsByName(c,"HTMLResource"),p=0,t=B.length;t>p;p++)f=B[p],b.type=f.getAttribute("creativeType")||"text/html",b.htmlResource=this.parseNodeText(f);for(C=this.childsByName(c,"IFrameResource"),q=0,u=C.length;u>q;q++)i=C[q],b.type=i.getAttribute("creativeType")||0,b.iframeResource=this.parseNodeText(i);for(D=this.childsByName(c,"StaticResource"),r=0,v=D.length;v>r;r++)j=D[r],b.type=j.getAttribute("creativeType")||0,b.staticResource=this.parseNodeText(j);for(E=this.childsByName(c,"TrackingEvents"),y=0,w=E.length;w>y;y++)for(l=E[y],F=this.childsByName(l,"Tracking"),z=0,x=F.length;x>z;z++)k=F[z],e=k.getAttribute("event"),m=this.parseNodeText(k),null!=e&&null!=m&&(null==(n=b.trackingEvents)[e]&&(n[e]=[]),b.trackingEvents[e].push(m));b.companionClickThroughURLTemplate=this.parseNodeText(this.childByName(c,"CompanionClickThrough")),d.variations.push(b)}return d},a.parseDuration=function(a){var b,c,d,e,f;return null==a?-1:(b=a.split(":"),3!==b.length?-1:(f=b[2].split("."),e=parseInt(f[0]),2===f.length&&(e+=parseFloat("0."+f[1])),d=parseInt(60*b[1]),c=parseInt(60*b[0]*60),isNaN(c||isNaN(d||isNaN(e||d>3600||e>60)))?-1:c+d+e))},a.parseNodeText=function(a){return a&&(a.textContent||a.text||"").trim()},a.isUrl=function(a){return/^https?:\/\/[^\s\/$\.\?#].*$/i.test(this.parseNodeText(a))},a}(),b.exports=k},{"./ad":2,"./companionad":4,"./creative":5,"./mediafile":7,"./response":9,"./urlhandler":11,"./util":14,events:1}],9:[function(a,b,c){var d;d=function(){function a(){this.ads=[],this.errorURLTemplates=[]}return a}(),b.exports=d},{}],10:[function(a,b,c){var d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("./client"),h=a("./util"),f=a("./creative").VASTCreativeLinear,d=a("events").EventEmitter,g=function(a){function b(a,b){var c,d,g;this.ad=a,this.creative=b,this.muted=!1,this.impressed=!1,this.skipable=!1,this.skipDelayDefault=-1,this.trackingEvents={},this.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],g=this.creative.trackingEvents;for(c in g)d=g[c],this.trackingEvents[c]=d.slice(0);this.creative instanceof f?(this.setDuration(this.creative.duration),this.skipDelay=this.creative.skipDelay,this.linear=!0,this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates):(this.skipDelay=-1,this.linear=!1),this.on("start",function(){e.lastSuccessfullAd=+new Date})}return j(b,a),b.prototype.setDuration=function(a){return this.assetDuration=a,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100}},b.prototype.setProgress=function(a){var b,c,d,e,f,g,h,i,j;if(f=null===this.skipDelay?this.skipDelayDefault:this.skipDelay,-1===f||this.skipable||(f>a?this.emit("skip-countdown",f-a):(this.skipable=!0,this.emit("skip-countdown",0))),this.linear&&this.assetDuration>0){if(c=[],a>0){c.push("start"),d=Math.round(a/this.assetDuration*100),c.push("progress-"+d+"%"),c.push("progress-"+Math.round(a)),j=this.quartiles;for(e in j)g=j[e],a>=g&&g+1>=a&&c.push(e)}for(h=0,i=c.length;i>h;h++)b=c[h],this.track(b,!0);a<this.progress&&this.track("rewind")}return this.progress=a},b.prototype.setMuted=function(a){return this.muted!==a&&this.track(a?"mute":"unmute"),this.muted=a},b.prototype.setPaused=function(a){return this.paused!==a&&this.track(a?"pause":"resume"),this.paused=a},b.prototype.setFullscreen=function(a){return this.fullscreen!==a&&this.track(a?"fullscreen":"exitFullscreen"),this.fullscreen=a},b.prototype.setSkipDelay=function(a){return"number"==typeof a?this.skipDelay=a:void 0},b.prototype.load=function(){return this.impressed?void 0:(this.impressed=!0,this.ad.impressionURLTemplates&&this.trackURLs(this.ad.impressionURLTemplates),this.track("creativeView"))},b.prototype.errorWithCode=function(a){return this.trackURLs(this.ad.errorURLTemplates,{ERRORCODE:a})},b.prototype.complete=function(){return this.track("complete")},b.prototype.stop=function(){return this.track(this.linear?"closeLinear":"close")},b.prototype.skip=function(){return this.track("skip"),this.trackingEvents=[]},b.prototype.click=function(){var a,b,c;return(null!=(c=this.clickTrackingURLTemplates)?c.length:void 0)&&this.trackURLs(this.clickTrackingURLTemplates),null!=this.clickThroughURLTemplate?(this.linear&&(b={CONTENTPLAYHEAD:this.progressFormated()}),a=h.resolveURLTemplates([this.clickThroughURLTemplate],b)[0],this.emit("clickthrough",a)):void 0},b.prototype.track=function(a,b){var c,d;null==b&&(b=!1),"closeLinear"===a&&null==this.trackingEvents[a]&&null!=this.trackingEvents.close&&(a="close"),d=this.trackingEvents[a],c=this.emitAlwaysEvents.indexOf(a),null!=d?(this.emit(a,""),this.trackURLs(d)):-1!==c&&this.emit(a,""),b===!0&&(delete this.trackingEvents[a],c>-1&&this.emitAlwaysEvents.splice(c,1))},b.prototype.trackURLs=function(a,b){return null==b&&(b={}),this.linear&&(b.CONTENTPLAYHEAD=this.progressFormated()),h.track(a,b)},b.prototype.progressFormated=function(){var a,b,c,d,e;return e=parseInt(this.progress),a=e/3600,a.length<2&&(a="0"+a),b=e/60%60,b.length<2&&(b="0"+b),d=e%60,d.length<2&&(d="0"+b),c=parseInt(100*(this.progress-e)),""+a+":"+b+":"+d+"."+c},b}(d),b.exports=g},{"./client":3,"./creative":5,"./util":14,events:1}],11:[function(a,b,c){var d,e,f;f=a("./urlhandlers/xmlhttprequest"),e=a("./urlhandlers/flash"),d=function(){function b(){}return b.get=function(b,c,d){return d||("function"==typeof c&&(d=c),c={}),c.urlhandler&&c.urlhandler.supported()?c.urlhandler.get(b,c,d):"undefined"==typeof window||null===window?a("./urlhandlers/node").get(b,c,d):f.supported()?f.get(b,c,d):e.supported()?e.get(b,c,d):d()},b}(),b.exports=d},{"./urlhandlers/flash":12,"./urlhandlers/xmlhttprequest":13}],12:[function(a,b,c){var d;d=function(){function a(){}return a.xdr=function(){var a;return window.XDomainRequest&&(a=new XDomainRequest),a},a.supported=function(){return!!this.xdr()},a.get=function(a,b,c){var d,e;return(e="function"==typeof window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLDOM"):void 0)?(e.async=!1,d=this.xdr(),d.open("GET",a),d.timeout=b.timeout||0,d.withCredentials=b.withCredentials||!1,d.send(),d.onprogress=function(){},d.onload=function(){return e.loadXML(d.responseText),c(null,e)}):c()},a}(),b.exports=d},{}],13:[function(a,b,c){var d;d=function(){function a(){}return a.xhr=function(){var a;return a=new window.XMLHttpRequest,"withCredentials"in a?a:void 0},a.supported=function(){return!!this.xhr()},a.get=function(a,b,c){var d;try{return d=this.xhr(),d.open("GET",a),d.timeout=b.timeout||0,d.withCredentials=b.withCredentials||!1,d.send(),d.onreadystatechange=function(){return 4===d.readyState?c(null,d.responseXML):void 0}}catch(e){return c()}},a}(),b.exports=d},{}],14:[function(a,b,c){var d;d=function(){function a(){}return a.track=function(a,b){var c,d,e,f,g,h;for(d=this.resolveURLTemplates(a,b),h=[],f=0,g=d.length;g>f;f++)c=d[f],"undefined"!=typeof window&&null!==window&&(e=new Image,h.push(e.src=c));return h},a.resolveURLTemplates=function(a,b){var c,d,e,f,g,h,i,j,k;d=[],null==b&&(b={}),"CACHEBUSTING"in b||(b.CACHEBUSTING=Math.round(1e10*Math.random())),b.random=b.CACHEBUSTING;for(j=0,k=a.length;k>j;j++)if(c=a[j],h=c){for(e in b)i=b[e],f="["+e+"]",g="%%"+e+"%%",h=h.replace(f,i),h=h.replace(g,i);d.push(h)}return d},a.storage=function(){var a,b,c,d;try{c="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){d=e,c=null}return b=function(a){var b,c;try{if(c="__VASTUtil__",a.setItem(c,c),a.getItem(c)!==c)return!0}catch(d){return b=d,!0}return!1},(null==c||b(c))&&(a={},c={length:0,getItem:function(b){return a[b]},setItem:function(b,c){a[b]=c,this.length=Object.keys(a).length},removeItem:function(b){delete a[b],this.length=Object.keys(a).length},clear:function(){a={},this.length=0}}),c}(),a}(),b.exports=d},{}]},{},[6])(6)}(),{deepCopy:function(a,b){for(var c in b)b.hasOwnProperty(c)&&"object"==typeof b[c]&&null!==b[c]?(a.hasOwnProperty(c)||(Array.isArray(b[c])?a[c]=[]:a[c]={}),d.deepCopy(a[c],b[c])):a[c]=b[c]},topLevelDomains:"abb,abbott,abogado,ac,academy,accenture,accountant,accountants,active,actor,ad,ads,adult,ae,aeg,aero,af,afl,ag,agency,ai,aig,airforce,airtel,al,allfinanz,alsace,am,amsterdam,an,android,ao,apartments,app,aq,aquarelle,ar,archi,army,arpa,as,asia,associates,at,attorney,au,auction,audio,auto,autos,aw,ax,axa,az,azure,ba,band,bank,bar,barcelona,barclaycard,barclays,bargains,bauhaus,bayern,bb,bbc,bbva,bcn,bd,be,beer,berlin,best,bf,bg,bh,bharti,bi,bible,bid,bike,bing,bingo,bio,biz,bj,black,blackfriday,bloomberg,blue,bm,bmw,bn,bnl,bnpparibas,bo,boats,bond,boo,boutique,br,bradesco,bridgestone,broker,brother,brussels,bs,bt,budapest,build,builders,business,buzz,bv,bw,by,bz,bzh,ca,cab,cafe,cal,camera,camp,cancerresearch,canon,capetown,capital,caravan,cards,care,career,careers,cars,cartier,casa,cash,casino,cat,catering,cba,cbn,cc,cd,center,ceo,cern,cf,cfa,cfd,cg,ch,channel,chat,cheap,chloe,christmas,chrome,church,ci,cisco,citic,city,ck,cl,claims,cleaning,click,clinic,clothing,cloud,club,cm,cn,co,coach,codes,coffee,college,cologne,com,commbank,community,company,computer,condos,construction,consulting,contractors,cooking,cool,coop,corsica,country,coupons,courses,cr,credit,creditcard,cricket,crown,crs,cruises,cu,cuisinella,cv,cw,cx,cy,cymru,cyou,cz,dabur,dad,dance,date,dating,datsun,day,dclk,de,deals,degree,delivery,democrat,dental,dentist,desi,design,dev,diamonds,diet,digital,direct,directory,discount,dj,dk,dm,dnp,do,docs,dog,doha,domains,doosan,download,drive,durban,dvag,dz,earth,eat,ec,edu,education,ee,eg,email,emerck,energy,engineer,engineering,enterprises,epson,equipment,er,erni,es,esq,estate,et,eu,eurovision,eus,events,everbank,exchange,expert,exposed,express,fail,faith,fan,fans,farm,fashion,feedback,fi,film,finance,financial,firmdale,fish,fishing,fit,fitness,fj,fk,flights,florist,flowers,flsmidth,fly,fm,fo,foo,football,forex,forsale,forum,foundation,fr,frl,frogans,fund,furniture,futbol,fyi,ga,gal,gallery,game,garden,gb,gbiz,gd,gdn,ge,gent,genting,gf,gg,ggee,gh,gi,gift,gifts,gives,gl,glass,gle,global,globo,gm,gmail,gmo,gmx,gn,gold,goldpoint,golf,goo,goog,google,gop,gov,gp,gq,gr,graphics,gratis,green,gripe,gs,gt,gu,guge,guide,guitars,guru,gw,gy,hamburg,hangout,haus,healthcare,help,here,hermes,hiphop,hitachi,hiv,hk,hm,hn,hockey,holdings,holiday,homedepot,homes,honda,horse,host,hosting,hoteles,hotmail,house,how,hr,ht,hu,ibm,icbc,icu,id,ie,ifm,il,im,immo,immobilien,in,industries,infiniti,info,ing,ink,institute,insure,int,international,investments,io,iq,ir,irish,is,it,iwc,java,jcb,je,jetzt,jewelry,jlc,jll,jm,jo,jobs,joburg,jp,jprs,juegos,kaufen,kddi,ke,kg,kh,ki,kim,kitchen,kiwi,km,kn,koeln,komatsu,kp,kr,krd,kred,kw,ky,kyoto,kz,la,lacaixa,land,lasalle,lat,latrobe,law,lawyer,lb,lc,lds,lease,leclerc,legal,lgbt,li,liaison,lidl,life,lighting,limited,limo,link,live,lk,loan,loans,lol,london,lotte,lotto,love,lr,ls,lt,ltda,lu,lupin,luxe,luxury,lv,ly,ma,madrid,maif,maison,management,mango,market,marketing,markets,marriott,mba,mc,md,me,media,meet,melbourne,meme,memorial,men,menu,mg,mh,miami,microsoft,mil,mini,mk,ml,mm,mma,mn,mo,mobi,moda,moe,monash,money,montblanc,mormon,mortgage,moscow,motorcycles,mov,movie,movistar,mp,mq,mr,ms,mt,mtn,mtpc,mu,museum,mv,mw,mx,my,mz,na,nadex,nagoya,name,navy,nc,ne,nec,net,netbank,network,neustar,new,news,nexus,nf,ng,ngo,nhk,ni,nico,ninja,nissan,nl,no,np,nr,nra,nrw,ntt,nu,nyc,nz,office,okinawa,om,omega,one,ong,onl,online,ooo,oracle,org,organic,osaka,otsuka,ovh,pa,page,panerai,paris,partners,parts,party,pe,pf,pg,ph,pharmacy,philips,photo,photography,photos,physio,piaget,pics,pictet,pictures,pink,pizza,pk,pl,place,play,plumbing,plus,pm,pn,pohl,poker,porn,post,pr,praxi,press,pro,prod,productions,prof,properties,property,ps,pt,pub,pw,py,qa,qpon,quebec,racing,re,realtor,realty,recipes,red,redstone,rehab,reise,reisen,reit,ren,rent,rentals,repair,report,republican,rest,restaurant,review,reviews,rich,ricoh,rio,rip,ro,rocks,rodeo,rs,rsvp,ru,ruhr,run,rw,ryukyu,sa,saarland,sakura,sale,samsung,sandvik,sandvikcoromant,sap,sarl,saxo,sb,sc,sca,scb,schmidt,scholarships,school,schule,schwarz,science,scor,scot,sd,se,seat,sener,services,sew,sex,sexy,sg,sh,shiksha,shoes,show,shriram,si,singles,site,sj,sk,ski,sky,skype,sl,sm,sn,sncf,so,soccer,social,software,sohu,solar,solutions,sony,soy,space,spiegel,spreadbetting,sr,st,starhub,statoil,studio,study,style,su,sucks,supplies,supply,support,surf,surgery,suzuki,sv,swatch,swiss,sx,sy,sydney,systems,sz,taipei,tatar,tattoo,tax,taxi,tc,td,team,tech,technology,tel,telefonica,temasek,tennis,tf,tg,th,thd,theater,tickets,tienda,tips,tires,tirol,tj,tk,tl,tm,tn,to,today,tokyo,tools,top,toray,toshiba,tours,town,toys,tr,trade,trading,training,travel,trust,tt,tui,tv,tw,tz,ua,ug,uk,university,uno,uol,us,uy,uz,va,vacations,vc,ve,vegas,ventures,versicherung,vet,vg,vi,viajes,video,villas,vision,vista,vistaprint,vlaanderen,vn,vodka,vote,voting,voto,voyage,vu,wales,walter,wang,watch,webcam,website,wed,wedding,weir,wf,whoswho,wien,wiki,williamhill,win,windows,wme,work,works,world,ws,wtc,wtf,xbox,xerox,xin,xn--1qqw23a,xn--30rr7y,xn--3bst00m,xn--3ds443g,xn--3e0b707e,xn--45brj9c,xn--45q11c,xn--4gbrim,xn--55qw42g,xn--55qx5d,xn--6frz82g,xn--6qq986b3xl,xn--80adxhks,xn--80ao21a,xn--80asehdb,xn--80aswg,xn--90a3ac,xn--90ais,xn--9et52u,xn--b4w605ferd,xn--c1avg,xn--cg4bki,xn--clchc0ea0b2g2a9gcd,xn--czr694b,xn--czrs0t,xn--czru2d,xn--d1acj3b,xn--d1alf,xn--estv75g,xn--fiq228c5hs,xn--fiq64b,xn--fiqs8s,xn--fiqz9s,xn--fjq720a,xn--flw351e,xn--fpcrj9c3d,xn--fzc2c9e2c,xn--gecrj9c,xn--h2brj9c,xn--hxt814e,xn--i1b6b1a6a2e,xn--imr513n,xn--io0a7i,xn--j1amh,xn--j6w193g,xn--kcrx77d1x4a,xn--kprw13d,xn--kpry57d,xn--kput3i,xn--l1acc,xn--lgbbat1ad8j,xn--mgb9awbf,xn--mgba3a4f16a,xn--mgbaam7a8h,xn--mgbab2bd,xn--mgbayh7gpa,xn--mgbbh1a71e,xn--mgbc0a9azcg,xn--mgberp4a5d4ar,xn--mgbpl2fh,xn--mgbx4cd0ab,xn--mxtq1m,xn--ngbc5azd,xn--node,xn--nqv7f,xn--nqv7fs00ema,xn--nyqy26a,xn--o3cw4h,xn--ogbpf8fl,xn--p1acf,xn--p1ai,xn--pgbs0dh,xn--q9jyb4c,xn--qcka1pmc,xn--rhqv96g,xn--s9brj9c,xn--ses554g,xn--unup4y,xn--vermgensberater-ctb,xn--vermgensberatung-pwb,xn--vhquv,xn--vuq861b,xn--wgbh1c,xn--wgbl6a,xn--xhq521b,xn--xkc2al3hye2a,xn--xkc2dl3a5ee0h,xn--y9a3aq,xn--yfro4i67o,xn--ygbi2ammx,xn--zfr164b,xxx,xyz,yachts,yandex,ye,yodobashi,yoga,yokohama,youtube,yt,za,zip,zm,zone,zuerich,zw",getDomainFromUrl:function(a,b){b||(b=d.topLevelDomains),a.indexOf("/")>-1&&(a=a.split("/")[0]),a=a.toLowerCase(),"127.0.0.1"===a&&(a="localhost");var c=a.split(".");"www"===c[0]&&"com"!==c[1]&&c.shift();for(var e,f=c.length,g=f,h=c[c.length-1].length;e=c[--g];)if(0===g||f-2>g||e.length<h||b.indexOf(e)<0){for(g===f-1&&g>0&&(g--,e=c[g]),g+=1;f>g;g++)e+="."+c[g];return e}},isFunction:function(a){var b={};return!!a&&"[object Function]"===b.toString.call(a)},addHtmlStructure:function(b,c,d,e,f,g){e=e||!1;var h=document.createElement("figure");h.setAttribute("class",m+""+b.prefix+"vc"),h.style.padding="0",h.style.margin="0",h.style.position="relative",h.style.overflow="hidden",h.style.minHeight="150px",h.style.minWidth="260px",h.style.boxSizing="content-box",c.appendChild(h);var i=d.style(),j=function(){i.hasOwnProperty("width")&&i.hasOwnProperty("aspectratio")?h.style.height=Math.round(h.clientWidth/i.aspectratio)+"px":i.hasOwnProperty("height")&&i.hasOwnProperty("aspectratio")&&(h.style.width=Math.round(h.clientHeight*i.aspectratio)+"px")};i.hasOwnProperty("width")&&i.hasOwnProperty("aspectratio")?(h.style.width=i.width.value+i.width.unit,j(),window.onload=j,a.addEventListener("resize",function(){h.style.height=Math.round(h.clientWidth/i.aspectratio)+"px"})):i.hasOwnProperty("height")&&i.hasOwnProperty("aspectratio")?(h.style.height=i.height.value+i.height.unit,j(),window.onload=j,a.addEventListener("resize",function(){h.style.width=Math.round(h.clientHeight*i.aspectratio)+"px"})):i.hasOwnProperty("width")&&i.hasOwnProperty("height")&&(h.style.width=i.width.value+i.width.unit,h.style.height=i.height.value+i.height.unit);var k;if(e){k=document.createElement("video"),k.setAttribute("id",m+""+b.prefix+"video-"+c.getAttribute("id")),k.setAttribute("width","100%"),k.setAttribute("height","100%");var l=d.playback(),n=d.source();l.hasOwnProperty("autoplay")&&l.autoplay&&k.setAttribute("autoplay","autoplay"),l.hasOwnProperty("muted")&&l.muted&&(k.muted=d.playback.muted),n.hasOwnProperty("poster")&&n.poster&&k.setAttribute("poster",n.poster);var o=function(){k.currentTime>0&&(k.removeEventListener("timeupdate",o),k.getAttribute("poster")&&k.removeAttribute("poster"))};k.addEventListener("timeupdate",o)}else k=document.createElement("div"),k.setAttribute("id",m+""+b.prefix+"video-"+c.getAttribute("id"));return h.appendChild(k),"hidden"===b.visibility&&(h.style.display="none"),h},extractBitrateFromString:function(a,b){return isNaN(b)?(b=b.toLowerCase().trim().replace(/,/g,"."),b.indexOf("mbps")>-1?1e6*b.split("m")[0]:b.indexOf("kbps")>-1?1e3*b.split("k")[0]:b.indexOf("bps")>-1?1*b.split("b")[0]:(console.warn("Bitrate format not recognized for "+b),"max"===a?1/0:0)):b===1/0?b:1*b},createErrorMsg:function(){var a=document.createElement("p");return a.setAttribute("class",m+"error-message"),a.style.backgroundColor="black",a.style.color="white",a.style.padding="20px",a.style.textAlign="center",a},createErrorMsgBox:function(){var a=document.createElement("div");return a.setAttribute("class",m+"error"),a},splitValueAndUnit:function(a){a+="";var b=/(\d+(?:\.\d+)?)/g,c=/([^0-9\.]+)/g,d={},e=a.match(b);d.value=parseFloat(e[0]);var f=a.match(c);return f&&f.length>0?d.unit=f[0]:d.unit="px",d},displaySetupError:function(a,b){var c=d.createErrorMsg(),e=d.createErrorMsgBox();c.innerHTML=a.message,e.appendChild(c),b.appendChild(e)},splitPlayerAndStreamingTechnology:function(a){var b={player:"",streaming:""};if(a&&"string"==typeof a){a=a.split(".");for(var c=0,d=0;d<a.length;d++)""===a[d]&&(a[d]=null,c++);if(c===a.length)return;return b.player=a[0],b.streaming=a[1],b}},getSystemLanguageArray:function(){var a=function(){var a,b={},c=[],d=function(a){a&&(a.indexOf("-")>-1&&(a=a.split("-")[0]),b[a]||(c.push(a),b[a]={}))};if(d(navigator.language),navigator.languages)for(a=0;a<navigator.languages.length;a++)d(navigator.languages[a]);return c}();return function(){return a.slice()}}()}),e=function(){var a={},b=function(b,c,d,e){return new Promise(function(f,g){var h;if(c=c||"GET",e=e||{},"GET"===c&&a.hasOwnProperty(b)&&a[b])return void f(a[b]);h=new XMLHttpRequest;try{h.open(c,b);for(var i in e)e.hasOwnProperty(i)&&h.setRequestHeader(i,e[i]);h.addEventListener("readystatechange",function(){h.readyState===h.DONE&&(h.status>=200&&h.status<300?(a[b]=h.response,f(h.response)):g(h.status))},!1),h.send(d)}catch(j){g(j)}})},c=function(b){return new Promise(function(c,d){if(a.hasOwnProperty(b)&&a[b])return void c();var e=document.getElementsByTagName("head")[0]||document.documentElement,f=!1,g=document.createElement("script");g.type="text/javascript",g.src=b,g.async=!0,g.onload=g.onreadystatechange=function(){f||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(f=!0,a[b]=!0,g.onload=g.onreadystatechange=null,e&&g.parentNode&&e.removeChild(g),c())},g.onerror=d,e.insertBefore(g,e.firstChild)})},d=function(b){if(!a.hasOwnProperty(b)||!a[b]){var c=document.getElementsByTagName("head")[0]||document.documentElement,d=document.createElement("link");d.setAttribute("rel","stylesheet"),d.setAttribute("type","text/css"),d.setAttribute("href",b),c.insertBefore(d,c.firstChild),a[b]=!0}};return{load:b,loadScript:c,loadCSS:d}},f=function(b){var d="12.0.0",f="11.2.0";void 0===b&&(b=navigator.userAgent),b.toLowerCase().indexOf("linux")>-1&&(d=f);var g=p.get("browserList");g=g&&g.list?g.list:["Chrome/41\\.0\\.2272\\.89","Chrome/41\\.0\\.2272\\.101"];var h={validForSeconds:86400,updateUrl:"https://bitdash-a.akamaihd.net/browserlist.json",list:g},i=function(){var a=p.get("browserException");if(!(a&&a.updateTimestamp>=(new Date).getTime()/1e3-h.validForSeconds)){var b=new e;b.load(h.updateUrl).then(function(a){a&&(h.list=JSON.parse(a),p.set("browserException",{list:h.list,updateTimestamp:Math.round((new Date).getTime()/1e3)}))})}};i();var j=function(){var a,c,d=!1;for(c=0;c<h.list.length&&(a=new RegExp(h.list[c],"i"),!(d=a.test(b)));c++);return d},k=function(){var a=document.createElement("video");return"maybe"===a.canPlayType("application/vnd.apple.mpegURL")||"maybe"===a.canPlayType("application/x-mpegURL")||"maybe"===a.canPlayType("audio/mpegurl")||"maybe"===a.canPlayType("audio/x-mpegurl")},l=function(){var b="MediaSource"in a&&a.MediaSource,c="WebKitMediaSource"in a&&a.WebKitMediaSource;return b?b=MediaSource.isTypeSupported('video/mp4; codecs="avc1.42c00d"'):c&&(c=WebKitMediaSource.isTypeSupported('video/mp4; codecs="avc1.42c00d"')),b||c},m=function(){return 0!==c.getFlashPlayerVersion().major&&c.hasFlashPlayerVersion(d)},n=function(){return!0},o=function(){return/Android/i.test(b)||/IEMobile/i.test(b)||/Safari/i.test(b)&&/Mobile/i.test(b)}(),r=function(){return d},s=function(){return"function"==typeof document.createElement("video").canPlayType},t=function(){var a=[];return l()&&a.push("dash"),a},u=function(){return m()?["dash","hls"]:[]},v=function(){var a=[];return k()&&a.push("hls"),s()&&n()&&a.push("progressive"),a},w=function(a,b){var c,d=!1,e=[];for("html5"===a?e=t():"flash"===a?e=u():"native"===a&&(e=v()),c=0;c<e.length&&!(d=b===e[c]);c++);return d},x=function(){var a,b,c=[{player:"html5",streaming:"dash"},{player:"native",streaming:"hls"},{player:"flash",streaming:"dash"},{player:"flash",streaming:"hls"},{player:"native",streaming:"progressive"}],d=[];for(a=0;a<c.length;a++)b=c[a],q.supports(b.player,b.streaming)&&d.push(b);return d},y=function(){return new x};return{supports:w,isMobile:o,getMinimumFlashVersion:r,getTechSupportedByPlatform:y,isBrowserVersionIncompatibleForMSE:j}},g=function(a){var b="bitdash_config",c={},d=function(){var a=366,b=new Date;return b.setTime(b.getTime()+864e5*a),"expires="+b.toUTCString()}(),e=function(a){var b,c,d=a+"=",e=document.cookie.split(";");for(b=0;b<e.length;b++){for(c=e[b];" "==c.charAt(0);)c=c.substring(1);if(0===c.indexOf(d))return c.substring(d.length,c.length)}return""},f=function(a){if(a)try{c=JSON.parse(a)}catch(b){}},g=function(){f(a?localStorage.getItem(b):e(b))},h=function(){try{a?localStorage.setItem(b,JSON.stringify(c)):document.cookie=b+"="+JSON.stringify(c)+"; "+d}catch(e){}},i=function(a){return c.hasOwnProperty(a)?c[a]:void 0},j=function(a,b){c[a]=b,h()},k=function(){g()};return k(),{get:i,set:j}};console||(console={}),console.debug||(console.debug=function(){}),console.log||(console.log=function(){}),console.warn||(console.warn=function(){}),console.error||(console.error=function(){});var h="pro",i="3.3.0",j="bitdash ",k=i+" "+h,l=j+k,m="bitdash-",n=["localhost","grainandmortar.com"],o=d.getDomainFromUrl(location.hostname),p=new g(!!localStorage&&"function"==typeof localStorage.getItem&&"function"==typeof localStorage.setItem),q=new f(navigator.userAgent),r={},s={},t=function(){var a="",b=(document.currentScript||function(){for(var a=document.getElementsByTagName("script"),b=a.length,c=a[b-1],d=0;b>d;d++)if(a[d].src.indexOf("bitdash.min.js")>-1)return a[d];return c}()).getAttribute("src");return b.lastIndexOf("/")>-1&&(a=b.substring(0,b.lastIndexOf("/")+1)),a}(),u={flash:t+"bitdashplayer.swf",js:t+"bitdashplayer.min.js",css:t+"bitdashplayer.min.css",cast:"//www.gstatic.com/cv/js/sender/v1/cast_sender.js"},v={playback:{autoplay:!1,muted:!1,volume:100,restoreUserSettings:!0,timeShift:!0,seeking:!0},source:{},style:{width:{value:640,unit:"px"},aspectratio:16/9,controls:!0,autoHideControls:!0,bufferingOverlay:!0,playOverlay:!0,keyboard:!0,mouse:!0,subtitlesHidden:!1,showErrors:!0},tweaks:{autoqualityswitching:!0,wmode:"transparent"},adaptation:{mobile:{bitrates:{minSelectableAudioBitrate:0,maxSelectableAudioBitrate:1/0,minSelectableVideoBitrate:0,maxSelectableVideoBitrate:1/0}},desktop:{bitrates:{minSelectableAudioBitrate:0,maxSelectableAudioBitrate:1/0,minSelectableVideoBitrate:0,maxSelectableVideoBitrate:1/0}}},cast:{enable:!1},events:{}},w=function(a){var c=function(c){var d,e=new b(o+c,"TEXT").getHash("SHA-256","HEX"),f=!1;for(d=0;d<a.length&&!(f=e===a[d]);d++);return f},d=function(b){var d,e,f=/[^A-Za-z0-9]/,g=!1;for(d=b.indexOf(",")>-1?b.split(","):[b],e=0;e<d.length&&(b=d[e].trim(),g=!f.test(b),g)&&!(g=c(b,a));e++);if(!g){var h=o;for(e=0;e<n.length;e++)if(""===n[e]||n[e]===h)throw new z(1002,h);throw new z(1008,[h,n,h])}return g};return{check:d}},x=function(a){var b={},c=new f,e=new w(["b259743d5ea68843545eaddf47d154197b4ea9c0f3a3865e86c73654c3c169c4","e317400eb4a11671dd33ef9258a01c57931a3d6eb4bb6c5030d51e9acf5a4334"]),g=function(a,b){var c=!1,e=!1,f=!1;if(b.hasOwnProperty("style")?(f=b.style.hasOwnProperty("width"),e=b.style.hasOwnProperty("height"),c=b.style.hasOwnProperty("aspectratio")):b.style={},c){var g;a.style.aspectratio=(b.style.aspectratio+"").replace(",","."),a.style.aspectratio.indexOf(":")>-1?g=a.style.aspectratio.split(":"):a.style.aspectratio.indexOf("/")>-1?g=a.style.aspectratio.split("/"):isNaN(parseFloat(a.style.aspectratio))?(delete a.style.aspectratio,c=!1):a.style.aspectratio=parseFloat(a.style.aspectratio),g&&Array.isArray(g)&&g.length>1&&(a.style.aspectratio=parseFloat(g[0])/parseFloat(g[1]))}b.style.hasOwnProperty("width")&&(a.style.width=d.splitValueAndUnit(b.style.width)),b.style.hasOwnProperty("height")&&(a.style.height=d.splitValueAndUnit(b.style.height)),f&&c||f&&e||e&&c||(!c||f||e?(!f||e||c)&&(!e||f||c)?(a.style.width={value:v.style.width.value,unit:v.style.width.unit},a.style.aspectratio=v.style.aspectratio):a.style.aspectratio=v.style.aspectratio:a.style.width={value:v.style.width.value,unit:v.style.width.unit})},i=function(a){if(d.deepCopy(b,v),d.deepCopy(b,a),b.hasOwnProperty("drm")&&b.drm&&b.hasOwnProperty("source")&&b.source&&!b.source.hasOwnProperty("drm")&&(b.source.drm=b.drm),b.hasOwnProperty("skin")&&"pro"!==h&&"enterprise"!==h&&(delete b.skin,console.warn("Skinning is only available in bitdash pro or enterprise version! Purchase now on http://www.dash-player.com")),"pro"!==h&&"enterprise"!==h&&b.hasOwnProperty("tweaks")&&(b.tweaks.hasOwnProperty("context_menu_entries")||b.tweaks.hasOwnProperty("CONTEXT_MENU_ENTRIES"))&&(delete b.tweaks.context_menu_entries,delete b.tweaks.CONTEXT_MENU_ENTRIES,console.warn("Adding context menu entries is only available in bitdash pro or enterprise version! Purchase now on http://www.dash-player.com")),c.isMobile?b.adaptation=b.adaptation.mobile:b.adaptation=b.adaptation.desktop,b.adaptation.bitrates.minSelectableAudioBitrate=d.extractBitrateFromString("min",b.adaptation.bitrates.minSelectableAudioBitrate),b.adaptation.bitrates.maxSelectableAudioBitrate=d.extractBitrateFromString("max",b.adaptation.bitrates.maxSelectableAudioBitrate),b.adaptation.bitrates.minSelectableVideoBitrate=d.extractBitrateFromString("min",b.adaptation.bitrates.minSelectableVideoBitrate),b.adaptation.bitrates.maxSelectableVideoBitrate=d.extractBitrateFromString("max",b.adaptation.bitrates.maxSelectableVideoBitrate),!b.source.hasOwnProperty("mobilempd")||!c.isMobile&&b.source.hasOwnProperty("mpd")||(console.warn("The source.mpd attribute has been deprecated and support will be removed in bitdash 4.0. Please use the adaptation object instead"),b.source.mpd=b.source.mobilempd,delete b.source.mobilempd),b.source.hasOwnProperty("mpd")&&(console.warn("The source.mpd attribute has been deprecated and support will be removed in bitdash 4.0. Please use source.dash instead"),b.source.dash=b.source.mpd,delete b.source.mpd),c.isMobile&&(b.playback.autoplay=!1),b.style.hasOwnProperty("width")&&delete b.style.width,b.style.hasOwnProperty("height")&&delete b.style.height,b.style.hasOwnProperty("aspectratio")&&delete b.style.aspectratio,g(b,a),b.style.hasOwnProperty("ux"))for(var e=["controls","playOverlay","bufferingOverlay","keyboard","mouse"],f=!!b.style.ux,i=0;i<e.length;i++)b.style[e[i]]=f;b.hasOwnProperty("location")&&b.location&&(b.location.hasOwnProperty("flash")&&(u.flash=b.location.flash),b.location.hasOwnProperty("html5")&&(u.js=b.location.html5),b.location.hasOwnProperty("css")&&(u.css=b.location.css))},j=function(a,c){return c=c||b,a?c.hasOwnProperty(a)?b[a]:{}:c;
},k=function(){return a},l=function(){var a={};a.autoPlay=b.playback.autoplay,a.muted=b.playback.muted,a.controlBarAutoHide=b.style.autoHideControls,a.controlBarAutoHideTimeout=4,a.playButtonOverlay=b.style.playOverlay,a.volume=b.playback.volume,a.bufferingOverlay=b.style.bufferingOverlay,a.keyboard=!!b.style.keyboard,a.mouse=!!b.style.mouse,b.style.controls===!1?a.controlBarMode="none":a.controlBarMode="docking",b.source.hasOwnProperty("poster")&&(a.poster=b.source.poster);var c=b.adaptation.bitrates;a.minSelectableAudioBitrate=c.minSelectableAudioBitrate,a.maxSelectableAudioBitrate=c.maxSelectableAudioBitrate,a.minSelectableVideoBitrate=c.minSelectableVideoBitrate,a.maxSelectableVideoBitrate=c.maxSelectableVideoBitrate,b.source&&b.source.drm&&b.source.drm.hasOwnProperty("clearkey")&&b.source.drm.clearkey.hasOwnProperty("LA_URL")&&(a.bitdash_bitClearKeyService=b.source.drm.clearkey.LA_URL);for(var d in b.tweaks)b.tweaks.hasOwnProperty(d)&&("object"==typeof b.tweaks[d]?a["bitdash_"+d.toUpperCase()]=JSON.stringify(b.tweaks[d]):a["bitdash_"+d.toUpperCase()]=b.tweaks[d]);return"object"==typeof b.skin&&(a.bitskin=encodeURIComponent(JSON.stringify(b.skin))),b.style.hasOwnProperty("subtitlesHidden")&&b.style.subtitlesHidden&&(a.bitdash_SUBTITLES_HIDDEN=!!b.style.subtitlesHidden),b.playback.hasOwnProperty("timeShift")&&(a.bitdash_TIME_SHIFT=!!b.playback.timeShift),a},m=function(c){for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d],a[d]=c[d])},n=function(){return[]},o=function(){if(!a)throw new z(1011);if(!a.hasOwnProperty("key"))throw new z(1001);e.check(a.key),i(a)};return o(),{playback:function(){return j("playback")},source:function(){return j("source")},style:function(){return j("style")},tweaks:function(){return j("tweaks")},adaptation:function(){return j("adaptation")},drm:function(){return j("drm",b.source)},skin:function(){return b.skin},cast:function(){return j("cast")},get:j,getUserConfig:k,getFlashVars:l,update:m,getPlayerPreference:n}},y=function(a,b){if(y.hasOwnProperty(a)||(a=4e3),this.code=a,this.msg=y[this.code],this.timestamp=(new Date).getTime(),b){"string"==typeof b&&(b=[b]);for(var c=0;c<b.length;c++)this.msg=this.msg.replace("{{"+c+"}}",b[c])}};y[4e3]="Unknown Error",y[4001]="Ad manifest could not be loaded",y[4002]="Ad manifest could not be parsed",y[4003]="Ad manifest not supported",y[4004]="invalid Ad config",y[4005]="unsupported ad client",y[4006]="{{0}} ads are not yet supported",y[4007]="tried to add more than one {{0}} creative";var z=function(a,b){if(z.hasOwnProperty(a)||(a=1e3),this.code=a,this.message=z[this.code],this.timestamp=(new Date).getTime(),b){"string"==typeof b&&(b=[b]);for(var c=0;c<b.length;c++)this.message=this.message.replace("{{"+c+"}}",b[c])}};z[1e3]="Unknown Error",z[1001]="No key was provided",z[1002]='Key is not compatible with the provided bitdash package. Please insert the key which was provided after registering your domain ({{0}}) at <a href="http://www.dash-player.com" target="_blank">http://www.dash-player.com</a>',z[1003]="No source was provided",z[1004]="There was an error when inserting the HTML video element",z[1005]="An error occurred during creating the flash player",z[1006]='No supported technology was detected, i.e. neither Flash nor the MediaSource Extension was found and no HLS manifest was given or HLS is also not supported. Please download the Flash Player from <a href="http://get.adobe.com/flashplayer/" target="_blank">http://get.adobe.com/flashplayer/</a> or try another browser.',z[1007]='Your flash player version is not supported, please upgrade to watch the video: <a href="http://get.adobe.com/flashplayer/" target="_blank">http://get.adobe.com/flashplayer/</a><br>(Your Flash Version: {{0}} | Required Flash Version: {{1}}',z[1008]='You are currently on <strong>{{0}}</strong>, but this bitdash version is locked to the following domains: {{1}}<br><br>If you want to use the player also on this domain, please go to <a href="http://www.dash-player.com" target="_blank">http://www.dash-player.com</a> and register a player for {{2}}',z[1009]="Could not load skin, using the default bitdash skin",z[1010]='Protocol not supported. This site has been loaded using "file" protocol, but unfortunately this is not supported. Please load the page using a web server (using http or https)',z[1011]="No configuration was provided",z[1012]="Could not load JavaScript player file",z[1013]="Unsupported stream type",z[1014]="Unknown player type",z[1015]="The player you tried to force ({{0}}) is not supported.";var A=function(a,b){var c={},e="bit"+(""+Math.random()).slice(3,15);s[e]=function(b,d){var e,f,g;if(c.hasOwnProperty(b)&&c[b].length>0){d.hasOwnProperty("type")||(d.type=b);var h=c[b];for(e=0;e<h.length;e++)h[e]&&"function"==typeof h[e]&&(f=h[e].call(a,d),f&&(g=f))}return g}.bind(a),this.add=function(a,b){c.hasOwnProperty(a)&&c[a].push(b)},this.addFromObject=function(a){for(var b in a)a.hasOwnProperty(b)&&this.add(b,a[b])},this.remove=function(a,b){if(c.hasOwnProperty(a))for(var d=c[a],e=0;e<d.length;e++)if(d[e]===b){d[e]=null;break}},this.getCallbackID=function(){return e},this.throwSetupError=function(e){if(e&&e instanceof z){if(c.hasOwnProperty("onError")&&c.onError.length>0)for(var f=0;f<c.onError.length;f++)d.isFunction(c.onError[f])&&c.onError[f]({type:"onError",timestamp:e.timestamp,code:e.code,message:e.message});var g=e.code+": "+e.message;new E(a,g),d.displaySetupError(e,b)}else console.error(e)};var f=function(){for(var a=0;a<B.length;a++)c[B[a]]=[]};f()},B=["onReady","onPlay","onPause","onSeek","onVolumeChange","onMute","onUnmute","onFullscreenEnter","onFullscreenExit","onPlaybackFinished","onError","onStartBuffering","onStopBuffering","onAudioChange","onSubtitleChange","onAudioLanguageChange","onSubtitlesLanguageChange","onVideoDownloadQualityChange","onAudioDownloadQualityChange","onVideoPlaybackQualityChange","onAudioPlaybackQualityChange","onTimeChanged","onMetadata","onCueEnter","onCueExit","onShowControls","onHideControls","onVideoAdaptation","onAudioAdaptation"],C=function(a,b,c){var f,g,i,j,k=this,n=!1,o=!1,p=!1,t={player:"unknown",streaming:"unknown"},u=new D,v=new A(k,a),w=new F(k),y=function(a){return new Promise(function(b,c){var d=new e;a=decodeURIComponent(a),d.load(a).then(function(a){a?b(JSON.parse(a)):c()})["catch"](function(){c()})})},B=function(){f&&n?f.setSkin(encodeURIComponent(JSON.stringify(j.skin()))):setTimeout(B,250)},C=function(b){"string"==typeof j.skin()&&y(j.skin()).then(function(a){j.update({skin:a}),B()}),u.getInstance(c,j,v.getCallbackID(),a,b).then(function(a){f=a.bitdashPlayer,t=a.technology,g=a.playerFigure,i&&i(g),o=!0})["catch"](function(a){a.hasOwnProperty("code")&&a.hasOwnProperty("message")?v.throwSetupError(a):console.error(a)})};this.getAvailableAudioLanguages=function(){return console.warn('"getAvailableAudioLanguages" is deprecated and will be removed in bitdash 4.0. Please use "getAvailableAudio" instead.'),f&&n?f.getAvailableAudioLanguages():!1},this.getAvailableSubtitleLanguages=function(){return console.warn('"getAvailableSubtitleLanguages" is deprecated and will be removed in bitdash 4.0. Please use "getAvailableSubtitles" instead.'),f&&n?f.getAvailableSubtitleLanguages():!1},this.getCurrentAudioLanguage=function(){return console.warn('"getCurrentAudioLanguage" is deprecated and will be removed in bitdash 4.0. Please use "getAudio" instead.'),f&&n?f.getCurrentAudioLanguage():!1},this.getCurrentSubtitleLanguage=function(){return console.warn('"getCurrentSubtitleLanguage" is deprecated and will be removed in bitdash 4.0. Please use "getSubtitle" instead.'),f&&n?f.getCurrentSubtitleLanguage():!1};var G=function(){for(var a=["isReady","isPlaying","isPaused","isMuted","isFullscreen","isStalled","isLive","hasEnded","getVolume","getCurrentTime","getDuration","getAvailableVideoQualities","getAvailableAudioQualities","getDroppedFrames","getAudioBufferLength","getVideoBufferLength","getTotalStalledTime","getDownloadedVideoData","getDownloadedAudioData","getPlaybackVideoData","getPlaybackAudioData","getMaxTimeShift","getTimeShift","getAvailableAudio","getAvailableSubtitles","getAudio","getSubtitle"],b=0;b<a.length;b++)k[a[b]]=function(){return f&&n?f[this]():!1}.bind(a[b])};this.setAudioLanguage=function(a){return console.warn('"setAudioLanguage" is deprecated and will be removed in bitdash 4.0. Please use "setAudio" instead.'),f&&n&&f.setAudioLanguage(a),k},this.setSubtitlesLanguage=function(a){return console.warn('"setSubtitlesLanguage" is deprecated and will be removed in bitdash 4.0. Please use "setSubtitle" instead.'),f&&n&&f.setSubtitlesLanguage(a),k},this.setVideoQuality=function(a){return f&&n&&(a=a||"auto",f.setVideoQuality(a)),k},this.setAudioQuality=function(a){return f&&n&&(a=a||"auto",f.setAudioQuality(a)),k},this.unload=function(){return f&&n&&(f.unload(),n=!1),k};var H=function(){for(var a=["seek","setVolume","setQueryParameters","setLastSegment","timeShift","setAudio","setSubtitle"],b=0;b<a.length;b++)k[a[b]]=function(a){return f&&n&&f[this](a),k}.bind(a[b])},I=function(){for(var a=["play","pause","mute","unmute","enterFullscreen","exitFullscreen","clearQueryParameters"],b=0;b<a.length;b++)k[a[b]]=function(){return f&&n&&f[this](),k}.bind(a[b])},J=function(){var a;k.isCasting=function(){if("pro"!==h&&"enterprise"!==h)console.warn("ChromeCast support is only available in bitdash pro or enterprise version! Purchase now on http://www.dash-player.com");else if(f&&n&&"function"==typeof f[this])return f[this]();return!1}.bind("isCasting"),k.setSkin=function(a){return console.log("The setSkin call will return a Promise instead of the player object itself as of bitdash 4.0."),"pro"!==h&&"enterprise"!==h?(console.warn("This feature is only available in bitdash pro or enterprise version! Purchase now on http://www.dash-player.com"),k):a?("string"==typeof a?y(a).then(function(a){j.update({skin:a}),B()})["catch"](function(){console.warn(new z(1009))}):(j.update({skin:a}),B()),k):k}.bind("setSkin");var b=["castVideo","castStop"];for(a=0;a<b.length;a++)k[b[a]]=function(){return"pro"!==h&&"enterprise"!==h?console.warn("ChromeCast support is only available in bitdash pro or enterprise version! Purchase now on http://www.dash-player.com"):f&&n&&"function"==typeof f[this]&&f[this](),k}.bind(b[a])};this.setup=function(a,b){if(console.log("The setup call will return a Promise instead of the player object itself as of bitdash 4.0."),f&&n){console.warn("player is already set up.");var c=j.skin();j.update(a);var e=j.skin();e&&e!==c&&B()}else try{a.hasOwnProperty("advertising")&&(a.hasOwnProperty("playback")||(a.playback={}),a.playback.autoplay=!1),j=new x(a),w.updateConfig(j),v.addFromObject(j.get("events")),b=d.splitPlayerAndStreamingTechnology(b),C(b),p=!0}catch(g){return v.throwSetupError(g),k}return k},this.addSubtitle=function(a,b,c,d,e){return f&&n&&("subtitle"===c||"caption"===c)&&f.addSubtitle(a,b,d,e),k},this.removeSubtitle=function(a){return f&&n&&f.removeSubtitle(a),k},this.addEventHandler=function(a,b){return v.add(a,b),k},this.removeEventHandler=function(a,b){return v.remove(a,b),k},this.getVersion=function(a){return a&&a&&f&&n?f.getVersion():l},this.getFigure=function(a){g?a(g):i=a},this.save=function(){w.save()},this.restore=function(){w.restore()},this.getStreamType=function(){return t.streaming},this.getPlayerType=function(){return t.player},this.getSupportedTech=function(){return q.getTechSupportedByPlatform()},this.isSetup=function(){return p};var K=function(a){var b={};if("string"==typeof a)console.warn("Loading a new source using a string is deprecated and will be removed in bitdash 4.0. Please use a source object instead."),b.dash=a;else{if("object"!=typeof a)return null;b=a,!b.hasOwnProperty("mobilempd")||b.hasOwnProperty("mpd")&&!q.isMobile||(b.dash=b.mobilempd,delete b.mobilempd)}return!b.hasOwnProperty("dash")&&b.hasOwnProperty("mpd")&&(b.dash=b.mpd),b.hasOwnProperty("mpd")&&delete b.mpd,b},L=function(){var b=a.getElementsByClassName(m+c.prefix+"vc")[0],d=a.getElementsByClassName(m+"ctxt-menu")[0],e=a.getElementsByClassName(m+"error")[0];b&&b.parentNode&&b.parentNode.removeChild(b),d&&d.parentNode&&d.parentNode.removeChild(d),e&&e.parentNode&&e.parentNode.removeChild(e)};this.load=function(a,b){console.log("The load call will return a Promise instead of the player object itself as of bitdash 4.0.");var c=function(a){f&&f.unload&&f.unload(),f=null,n=!1,L(),C(a)};if(a=K(a),j.update({source:a}),b)b=d.splitPlayerAndStreamingTechnology(b),t.streaming===b.streaming&&t.player===b.player?f.load(a[t.streaming],a.poster):c(b);else{var e=u.getSupportedTechSequence();if(e.length<1)return;a.hasOwnProperty(t.streaming)&&e[0].player===t.player&&e[0].streaming===t.streaming?f.load(a[t.streaming],a.poster):c()}},this.getConfig=function(){return j?j.getUserConfig():{}},this.getSnapshot=function(){return f&&n&&"flash"!==t.player?f.getSnapshot():null},this.setPlaybackSpeed=function(a){f&&n&&"flash"!==t.player&&f.setPlaybackSpeed(a)},this.getPlaybackSpeed=function(){return f&&n&&"flash"!==t.player?f.getPlaybackSpeed():1},this.destroy=function(){k.save(),k.unload(),L();for(var a in k)delete k[a];n=!1,f=null,r[b]=void 0,delete r[b],delete s[v.getCallbackID()],v=null};var M=function(){v.add("onMute",w.saveMuted),v.add("onUnmute",w.saveMuted),v.add("onVolumeChange",w.saveVolume),v.add("onAudioChange",w.saveAudio),v.add("onSubtitleChange",w.saveSubtitle)},N=function(){G(),H(),I(),J(),v.add("onError",function(b){if(b.code>=2e3&&3009!==b.code){L(),t={player:"unknown",streaming:"unknown"};var c=j.style();(!c.hasOwnProperty("showErrors")||c.showErrors)&&d.displaySetupError(b,a)}}),v.add("onReady",function(){n=!0;var a=j.playback(),b=a.hasOwnProperty("autoplay")&&!!a.autoplay;!b||k.isPlaying()||q.isMobile||k.play(),new E(k),(!a.hasOwnProperty("restoreUserSettings")||a.restoreUserSettings)&&w.restore(),M()})};N()},D=function(){var b=function(b,c,f,g,i){return new Promise(function(j,k){if("dash"!==g.streaming&&"hls"!==g.streaming&&"progressive"!==g.streaming)return void k(new z(1013));var l=d.addHtmlStructure(i,f,b,!0),n=new e,o=function(){var a=f.getElementsByClassName(m+i.prefix+"vc")[0].getElementsByTagName("video");if(a.length>0){var d,e=bitmovin.bitmse(a[0],s[c],b.get(),g.streaming,q.isMobile);"dash"===g.streaming?d=b.source().dash:"hls"===g.streaming?d=b.source().hls:"progressive"===g.streaming&&(d=b.source().progressive),d&&e.load(d),j({player:e,figure:l})}else k(new z(1004))};a.bitmovin&&a.bitmovin.bitmse&&d.isFunction(a.bitmovin.bitmse)?o():(n.loadCSS(u.css),n.loadScript(u.js).then(function(){o()},function(){k(new z(1012))})),b.cast().enable&&"free"!==h&&a.chrome&&!a.chrome.cast&&n.loadScript(u.cast)})},f=function(a,b,e,f,g){return new Promise(function(h,i){var j=a.getFlashVars(),k=e.getAttribute("id");if("dash"===f.streaming)j.src=a.source().dash,j.inputType=f.streaming;else{if("hls"!==f.streaming)return void i(new z(1013));j.src=a.source().hls,j.inputType=f.streaming}j.src=encodeURIComponent(j.src);var l=d.addHtmlStructure(g,e,a);j.apiCallback=b;var n={};n.allowfullscreen=!0,n.allowscriptaccess="always",n.wmode=a.tweaks().wmode,n.scale="exactfit",n.quality="high",n.bgcolor="#000000";var o={id:m+""+g.prefix+"video-"+k,name:m+""+g.prefix+"video-"+k},p=q.getMinimumFlashVersion();c.embedSWF(u.flash,o.id,"100%","100%",p,"http://files.dash-player.com/expressInstall.swf",j,n,o,function(a){if(a.success){var b=document[o.id];h({player:b,figure:l})}else i(new z(1005))})})},g=function(a,b){if(!a||Object.keys(a).length<1)return!b||b.length<1?[]:[b[0]];var c,d,e=[],f=-1;for(d=0;d<b.length;d++)switch(c=b[d],c.streaming){case"dash":a.hasOwnProperty("dash")&&a.dash&&(e.push(c),"html5"===c.player&&(f=e.length-1));break;case"hls":case"progressive":a.hasOwnProperty(c.streaming)&&a[c.streaming]&&e.push(c)}return f>-1&&q.isBrowserVersionIncompatibleForMSE()&&(c=e.splice(f,1),e.push(c[0])),e},i=function(a){var b=q.getTechSupportedByPlatform();if(!a||a.length<1)return b;var c,d,e,f,g=[];for(e=0;e<a.length;e++)for(c=a[e].split("."),f=0;f<b.length;f++)if(d=b[f],c[0]===d.player&&c[1]===d.streaming){g.push(d),b.splice(f,1);break}for(e=0;e<b.length;e++)g.push(b[e]);return g},j=function(a,b){var c=a.getPlayerPreference(),d=i(c),e=g(a.source(),d),f=[];if(b){for(var h=0;h<e.length;h++)if(e[h].player===b.player&&e[h].streaming===b.streaming){f=[],f.push(b);break}}else f=e;return f},k=function(a,d,e,g,h){return new Promise(function(i,k){var l=j(d,h);if(l.length>0){var m,n=l[0];switch(n.player){case"html5":case"native":m=b;break;case"flash":m=f;break;default:return void k(new z(1014))}m(d,e,g,n,a).then(function(a){i({bitdashPlayer:a.player,playerFigure:a.figure,technology:n})})["catch"](function(a){k(a)})}else{var o,p=c.getFlashPlayerVersion(),r=d.source(),s=r.hasOwnProperty("dash")&&r.dash||r.hasOwnProperty("mpd")&&r.mpd||r.hasOwnProperty("hls")&&r.hls||r.hasOwnProperty("progressive")&&r.progressive;if(s)if(h)o=new z(1015,h.player);else if(0===p.major||c.hasFlashPlayerVersion(q.getMinimumFlashVersion()))o=new z(1006);else{var t=p.major+"."+p.minor+"."+p.release;o=new z(1007,[t,q.getMinimumFlashVersion()])}else o=new z(1003);k(o)}})};return{getInstance:k,getSupportedTechSequence:i}},E=function(a,b){var c=new e,d="callinghome",f="https://",g=[f+d+"1.dash-player.com",f+d+"2.dash-player.com"],h=0,i=!b,j={"Content-type":"application/x-www-form-urlencoded"},k=function(){if(a.hasOwnProperty("getConfig")){var e,f=a.getConfig();f.hasOwnProperty("key")&&(e=f.key);var l={version:a.getVersion(),key:e,url:location.hostname,success:i};if(i?l.player=a.getVersion(!0):l.errorMessage=b,l="data="+encodeURIComponent(JSON.stringify(l)),!(h>=g.length)){var m=g[h]+"/"+d+"/"+d+".php";c.load(m,"POST",l,j)["catch"](function(){h++,k()})}}};k()},F=function(a){var b,c=function(a,b){var c;if("string"==typeof b)a.unshift(b);else if("length"in b&&b.length&&b.length>0)for(c=b.length-1;c>=0;c--)"string"==typeof b[c]&&a.unshift(b[c]);else console.debug("Incompatible default language definition, ignoring it.");return a},e=function(){var a=p.get("subtitleLang"),d=["off"],e=b.playback();e.hasOwnProperty("subtitleLanguage")&&e.subtitleLanguage&&(d=c(d,e.subtitleLanguage)),a&&d.unshift(a),o(d)},f=function(){var a=p.get("audioLang"),e=d.getSystemLanguageArray(),f=b.playback();f.hasOwnProperty("audioLanguage")&&f.audioLanguage&&(e=c(e,f.audioLanguage)),a&&e.unshift(a),n(e)},g=function(){var c=p.get("muted");void 0===c&&(c=b.playback().muted),c?a.mute():a.unmute()},h=function(){var c=p.get("volume");c?a.setVolume(c):a.setVolume(b.playback().volume)},i=function(){p.set("muted",a.isMuted())},j=function(){var b=a.getVolume();!isNaN(b)&&b>=0&&100>=b&&p.set("volume",b)},k=function(){var b=a.getAudio();b&&p.set("audioLang",b.lang)},l=function(){var b=a.getSubtitle();b&&p.set("subtitleLang",b.lang)},m=function(b,c,d){var e,f,g,h=!1;for(f=0;f<b.length;f++){for(g=0;g<c.length;g++)if(e=c[g],e&&b[f]===e.lang){a[d](e.id),h=!0;break}if(h)break}},n=function(b){m(b,a.getAvailableAudio(),"setAudio")},o=function(b){m(b,a.getAvailableSubtitles(),"setSubtitle")},q=function(){j(),i(),k(),l()},r=function(){a&&(h(),g(),f(),e())},s=function(a){b=a};return{saveMuted:i,saveVolume:j,saveAudio:k,saveSubtitle:l,save:q,restore:r,updateConfig:s}},G=!1,H=function(a){"file:"===location.protocol&&a&&!G&&(G=new z(1010),d.displaySetupError(G,a))},I=function(a){var b=void 0;if(a)if("*"===a){var c=[];for(var d in r)r.hasOwnProperty(d)&&c.push(r[d]);b=c}else{var e=document.getElementById(a);H(e),e&&(r.hasOwnProperty(a)||(r[a]=new C(e,a,{visibility:"visible",prefix:""}),G&&(r[a].setup=function(){return console.error(G),r[a]})),b=r[a])}else b=s;return b},J=function(a,b,c){"enterprise"!==h&&console.log("%c"+a,"color:"+b+";font-weight:bold;font-size:"+c+"px;")},K=function(){J("www.bitmovin.net","black","28"),J("bitmovin media streaming - we make your videos flow","blue","14"),J("Industry Leading Streaming Solutions and Server Encoding Systems","blue","14"),J("(c) 2015 bitmovin GmbH. All rights reserved","blue","14")};K(),"function"==typeof define&&define.amd?define([],function(){return I}):"function"==typeof require&&"object"==typeof exports&&"object"==typeof module&&(module.exports?module.exports=I:exports=I),a.bitdash=I,a.bitdash.expireWarning=function(){alert("Thank you for using bitdash! \nThis version of the player has expired. Please contact our sales team: sales@bitmovin.net")},I.EVENTS=B}(this);